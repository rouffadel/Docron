<div *ngIf="(Screen==1)" class="flex flex-col flex-auto min-w-0">


    <mat-tab-group>
        <mat-tab label="Today">

            <div class="flex items-center justify-between w-full overflow-x-auto p-2">
                <div class="flex items-center">
                  <!-- Search Input -->
                  <ng-container *ngIf="Todays">
                    <mat-form-field class="search1 mr-2 custom-background min-w-[200px] max-w-xs" appearance="outline">
                      <mat-icon matPrefix>perm_identity</mat-icon>
                      <input matInput type="text" [(ngModel)]="searchKey" (keyup)="doFilter1(searchKey, 1)" placeholder="Search Profile" />
                      <button mat-button *ngIf="searchKey" matSuffix (click)="clearSearch()">
                        <mat-icon>close</mat-icon>
                      </button>
                    </mat-form-field>
                  </ng-container>
              
                  <!-- Service Selection -->
                  <ng-container *ngIf="Todays">
                    <mat-form-field class="ml-2 custom-background min-w-[200px] max-w-xs" appearance="outline">
                      <mat-label >Select Service</mat-label>
                      <mat-select [(ngModel)]="filterService" (selectionChange)="filterDataByService($event)">
                        <mat-option *ngFor="let item of services" [value]="item.serviceName">
                          {{ item.serviceName }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </ng-container>
              
                  <!-- Clear and Refresh Buttons -->
                  <div class="flex items-center space-x-2 ml-2">
                    <button *ngIf="Todays" [matTooltipPosition]="'right'" (click)="resetFilters()" [matTooltip]="tooltip || 'Clear'" mat-mini-fab color="primary" class="shadow-none cursor-pointer circle" style="height: 40%; width: 65%; background-color:#ff6f3b;">
                      <mat-icon svgIcon="mat_outline:clear"></mat-icon>
                    </button>
                    <button *ngIf="Todays" (click)="resetFilters()" [matTooltipPosition]="'right'" [matTooltip]="tooltip || 'Refresh'" mat-mini-fab color="primary" class="shadow-none cursor-pointer" style="height: 40%; width: 65%; background-color: #ff6f3b;">
                      <mat-icon svgIcon="mat_outline:refresh"></mat-icon>
                    </button>
                  </div>
                </div>
             
        <!-- Pending and Completed Section -->
                <div class="flex fex-cols">
                <div class="flex flex-cols mt-1 items-center space-x-6">
            <!-- Admin Pending and Completed -->
            <div class="pending-completed admin-section" *ngIf="Todays && roleID != 2 && roleID != 3 && roleID != 4 && roleID != 5">
                <div class="status-container">
                    <span class="text-lg pending"><b>Pending: {{adminpending}}</b></span>
                    <!-- Divider -->
                    <div class="divider"></div>
                    <span class="text-lg completed"><b>Completed: {{admincomplete}}</b></span>
                </div>
            </div>
        
            <!-- Doctor Pending and Completed -->
            <div class="pending-completed doctor-section" *ngIf="Todays && roleID != 1 && roleID != 3 && roleID != 4 && roleID != 5">
                <div class="status-container">
                    <span class="text-lg pending"><b>Pending: {{doctorpending}}</b></span>
                    <!-- Divider -->
                    <div class="divider"></div>
                    <span class="text-lg completed"><b>Completed: {{doctorcomplete}}</b></span>
                </div>
            </div>
                </div>

                <!-- New Appointment Button -->
                <!-- <button *ngIf="roleID != '2'" class="fuse-mat-button-rounded ml-4 mt-1 flex-shrink-0" mat-flat-button color="primary" (click)="appointmentDrawer.toggle();actionFormName('New Appointment')">
                  <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:plus'"></mat-icon>
                  <span class="ml-2">New Appointment</span>
                </button> -->
              
                <!-- Select Columns Section -->
                <ng-container *ngIf="Todays">
                  <mat-form-field class="custom-background ml-4 min-w-[200px] max-w-xs flex-shrink-0" *ngIf="roleID == '1'" appearance="outline">
                    <mat-select multiple [(ngModel)]="selectedColumns" (selectionChange)="updateDisplayedColumns()">
                      <mat-select-trigger>
                        <span>Select Columns</span>
                      </mat-select-trigger>
                      <mat-option style="color: #212121; font-weight: 500;" *ngFor="let column of columnDefinitions" [value]="column.def" [disabled]="column.def === 'Actions' || column.def === 'Vitals' || column.def === 'View'">
                        {{ column.displayName }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>

                  <mat-form-field class="custom-background ml-4 min-w-[200px] max-w-xs flex-shrink-0" *ngIf="roleID == '2'" appearance="outline">
                    <mat-select multiple [(ngModel)]="selectedColumns2" (selectionChange)="updateDisplayedColumns2()">
                      <mat-select-trigger>
                        <span>Select Columns</span>
                      </mat-select-trigger>
                      <mat-option style="color: #212121; font-weight: 500;" *ngFor="let column of columnDefinitions2" [value]="column.def" [disabled]="column.def === 'Actions' || column.def === 'Vitals' || column.def === 'View'">
                        {{ column.displayName }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>

                  <mat-form-field class="custom-background ml-4 min-w-[200px] max-w-xs flex-shrink-0" *ngIf="roleID == '3'" appearance="outline">
                    <mat-select multiple [(ngModel)]="selectedColumns7" (selectionChange)="updateDisplayedColumns7()">
                      <mat-select-trigger>
                        <span>Select Columns</span>
                      </mat-select-trigger>
                      <mat-option style="color: #212121; font-weight: 500;" *ngFor="let column of columnDefinitions7" [value]="column.def" [disabled]="column.def === 'Actions' || column.def === 'Vitals' || column.def === 'View'">
                        {{ column.displayName }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>

                  <mat-form-field class="custom-background ml-4 min-w-[200px] max-w-xs flex-shrink-0" *ngIf="roleID == '5'" appearance="outline">
                    <mat-select multiple [(ngModel)]="selectedColumns5" (selectionChange)="updateDisplayedColumns5()">
                      <mat-select-trigger>
                        <span>Select Columns</span>
                      </mat-select-trigger>
                      <mat-option style="color: #212121; font-weight: 500;" *ngFor="let column of columnDefinitions5" [value]="column.def" [disabled]="column.def === 'Actions' || column.def === 'Vitals' || column.def === 'View'">
                        {{ column.displayName }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </ng-container>
                </div>
              </div>

              <div *ngIf="Todays" class="table-container">

                <div *ngIf="isAdmin"  class="example-container mat-elevation-z8 h-grid" #TABLE>
                    <table class='table1 scroolbar' mat-table [dataSource]="todaysbooked" matSort
                    (matSortChange)="sortData($event)">

                     
                        
                        <ng-container matColumnDef="SL">

                            <th mat-header-cell *matHeaderCellDef mat-sort-header style="width:150px;" class="text-lg text-white">
                                    Patient ID
                            </th>
                            <td mat-cell *matCellDef="let element" style="cursor: pointer; color: #1469a6;" (click)="onRowClicked(element)">
                                {{ element.patientARCID }}
                            </td>
                        </ng-container>

                  <!-- <ng-container matColumnDef="Patient" sticky>
                           
                            <th mat-header-cell *matHeaderCellDef style="width:250px; right: 90.738px !important;" class="text-lg text-white">
                               Patient Details
                            </th>
                            <td mat-cell *matCellDef="let element" >
                                <span><b>{{ element.patient | titlecase }}</b></span>
                                ({{ element.gender | slice: 0:1 }}, {{ element.age }}y)
                                <br />
                                <ng-container *ngIf="roleID != 2">
                                    {{ element.mobile }}
                                </ng-container>
                            </td>
                        </ng-container> -->


                        <ng-container matColumnDef="Patient" sticky>
                            <!-- Header Cell -->
                            <th mat-header-cell *matHeaderCellDef style="width:250px; right: 90.738px !important;" class="text-lg text-white">
                              <div class="patientDetails-cell-wrapper">
                                <div class="patientDetails-text">
                                  Patient Details
                                </div>
                                <div class="patientDetails-vertical-bar right-barh"></div>
                              </div>
                            </th>
                          
                            <!-- Data Cell -->
                            <td mat-cell *matCellDef="let element">
                              <div class="patientDetails-cell-wrapper">
                                <div class="patientDetails-text">
                                  <span><b>{{ element.patient | titlecase }}</b></span>
                                  ({{ element.gender | slice: 0:1 }}, {{ element.age }}y)
                                  <br />
                                  <ng-container *ngIf="roleID != 2">
                                    {{ element.mobile }}
                                  </ng-container>
                                </div>
                                <div class="patientDetails-vertical-bar right-bar"></div>
                              </div>
                            </td>
                          </ng-container>

                          <ng-container matColumnDef="ReceiptToken">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg admin-token-width  text-white" style="padding-left: 10px;">
                               Token
                            </th>
                            <td mat-cell *matCellDef="let element" style="padding-left: 10px;">
                                <span>
                                    {{ element.receiptToken }}
                                </span>


                            </td>
                        </ng-container>

                        <ng-container matColumnDef="Service">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header style="padding-left: 10px; width:200px" class="text-lg text-white">
                                Service Name
                            </th>

                            <td mat-cell *matCellDef="let element" style="padding-left: 10px;">
                                <span>{{ element.serviceName }}</span>
                            </td>
                        </ng-container>

                        <ng-container style="margin: auto;" matColumnDef="Doctor ID">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg admin-doctor-width text-white" style="display:none;">
                                    <span  *ngIf="roleID !='2' ">Doctor ID</span>

                            </th>

                            <td mat-cell *matCellDef="let element" style="display:none;">
                                <span *ngIf="roleID !='2' ">{{ element.doctorID }}</span>
                            </td>
                        </ng-container>

                        <ng-container style="margin: auto;" matColumnDef="Doctor">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg admin-doctor-width text-white" >
                                    <span  *ngIf="roleID !='2' ">Doctor</span>

                            </th>

                            <td mat-cell *matCellDef="let element" >
                                <span *ngIf="roleID !='2' ">{{ element.doctor }}</span>
                            </td>
                        </ng-container>

                        <ng-container style="margin: auto;" matColumnDef="Time">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg admin-Time-width text-white">
                                Slot Time
                            </th>
                            <td mat-cell *matCellDef="let element" >

                                <span>{{ element.slotTime }}</span>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="WaitingTime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="visit" class="text-lg admin-vcount-width  text-white">
                                Waiting Time
                            </th>
                            <td mat-cell *matCellDef="let element" class="visit">
                                <span *ngIf="element.waitingTime !=0.00">
                                    <b> {{ element.waitingTime }} </b>
                                </span>
                                <span *ngIf="element.waitingTime ==0">
                                    -
                                </span>

                            </td>
                        </ng-container>

                        <ng-container style="margin: auto;" matColumnDef="BookingTime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg admin-Time-width text-white">
                                Booking Time
                            </th>
                            <td mat-cell *matCellDef="let element" >
                                <span>{{ formatCustomDate(element.createdDate).split(', ')[2] }}</span>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="LastVisit">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header style="width:180px" class="text-lg text-white">
                               Last Visit
                            </th>

                            <!-- <td mat-cell *matCellDef="let element" >
                                <span>{{ element.lastVisitDate | date }} {{ element.lastVisitDate | date:'HH:mm'
                                    }}</span>
                            </td> -->
                            <td mat-cell *matCellDef="let element" >
                                <span>{{ element.lastVisitDate | date }}</span>
                            </td>
                        </ng-container>
                     
                        <ng-container matColumnDef="VisitCount">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg admin-vcount-width text-white">
                                Visit Count#
                            </th>
                            <td mat-cell *matCellDef="let element" class="visit">
                                <span>
                                    {{ element.visitCount }}
                                </span>


                            </td>
                        </ng-container>


                        <ng-container matColumnDef="Billing">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg admin-token-width text-white">
                                Billing
                            </th>

                            <td mat-cell *matCellDef="let element" >
                                {{ element.payment }}
                            </td>
                        </ng-container>
                        
                        <ng-container matColumnDef="DuePayment">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white ">
                                Due Payment
                            </th>

                            <td mat-cell *matCellDef="let element" style="cursor: pointer;">

                                <div
                                    *ngIf="(element.modeofPaymentID != 5) && (element.duePayment == null || element.duePayment == '0.00')">

                                    <div style="color: green;">Paid</div>
                                </div>
                                <span
                                    *ngIf="(roleID=='1' ||roleID=='3')  && element.modeofPaymentID == 5 && element.duePayment == '0.00'"
                                    style="color: #ff4081;" (click)="appointmentDrawer.toggle();updateSelect(element)">
                                    <mat-icon style="color: #ff4081;">payment</mat-icon>
                                    Pay
                                </span>
                                <span
                                    *ngIf="(roleID=='5')  && element.modeofPaymentID == 5 && element.duePayment == '0.00'"
                                    style="color: #ff4081;">
                                    <mat-icon style="color: #ff4081;">payment</mat-icon>
                                    Pay
                                </span>
                                <span
                                    *ngIf="(roleID=='2')  && element.modeofPaymentID == 5 && element.duePayment == '0.00'"
                                    style="color: #ff4081;">
                                    <mat-icon style="color: #ff4081;">payment</mat-icon>
                                </span>

                                <span *ngIf="element.duePayment != null && element.duePayment != '0.00'"
                                    style="color: #ff4081;"
                                    (click)="appointmentDrawer.toggle();updateSelectDuePay(element)">
                                    <mat-icon style="color: #ff4081;">payment</mat-icon>
                                    <span> {{ element.duePayment }}</span>

                                </span>

                            </td>
                        </ng-container>


                <ng-container matColumnDef="Vitals" >
                    <th mat-header-cell *matHeaderCellDef class="text-lg text-white ">
                        
                    </th>
                    <td mat-cell class="w-10" *matCellDef="let row">
                        <button mat-button *ngIf="roleID == '5' && row.vitalsID && row.status !== 'Completed'"
                            (click)="vitalsDrawer.toggle(); $event.stopPropagation()">
                            <div *ngIf="row.vitalsID" style="color: green" (click)="setValues(row)">
                                Update Vitals
                            </div>
                        </button>
                
                        <button mat-button
                            *ngIf="roleID == '5' && (row.modeofPaymentID != 5) && (row.duePayment == null || row.duePayment == '0.00') && !row.vitalsID && row.status !== 'Completed'"
                            (click)="vitalsDrawer.toggle(); $event.stopPropagation()">
                            <div style="color: #ff4081"
                                *ngIf="(row.modeofPaymentID != 5) && (row.duePayment == null || row.duePayment == '0.00') && !row.vitalsID"
                                (click)="rowData(row)">
                                Add Vitals
                            </div>
                        </button>
                
                        <div *ngIf="roleID == '5' && row.status === 'Completed'" style="color: green">
                            Cannot Update
                        </div>
                
                       
                    </td>
                </ng-container>

                        <ng-container matColumnDef="View" >
                            <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                                Receipt 1
                            </th>
                            <td mat-cell class="w-30 " *matCellDef="let row">
                                <button mat-button *ngIf="roleID == '5' || roleID == '1'" (click)="onRowClicked(row)">
                                    Visits
                                </button>
                        
                                <button mat-button *ngIf="roleID == '2' || roleID == '3' && row.doctorCompleted == 1" 
                                        matTooltip="Print" 
                                        (click)="onRowPrintPresecptionClicked(row)">
                                    <mat-icon>print</mat-icon>
                                </button>

                                
                            </td>
                        </ng-container>
                        

                        <ng-container matColumnDef="History"  stickyEnd>
                            <th mat-header-cell *matHeaderCellDef style="width:150px" class="text-lg head-width align-left text-white">
                                History
                            </th>

                            <td class="align-left" mat-cell *matCellDef="let element">
                               
                                <button mat-button>
                                    <div style="color: #146aa6" (click)="onRowClicked(element)"><mat-icon
                                            [matTooltipPosition]="'right'" [matTooltip]="tooltip || 'View History'"
                                            svgIcon="heroicons_solid:eye" #file style="color:#146aa6">
                                        </mat-icon></div><!--view-->
                                </button>

                            </td>
                        </ng-container>

                        <!-- <ng-container matColumnDef="Status" stickyEnd>
                            <th mat-header-cell *matHeaderCellDef  class="text-lg text-white admin-Status-width admin-Status">
                                Status
                            </th>
                            <td mat-cell *matCellDef="let element" class="admin-Status">
                                <span *ngIf="element.status == 'Booked'" style="color: #146aa6;">
                                    <b>{{ element.status }}</b>
                                </span>
                                <span *ngIf="element.status == 'Completed'" style="color: green">
                                    <b>{{ element.status }}</b>
                                </span>
                                <span *ngIf="element.status == 'In Progress'" style="color: #ff4081">
                                    <b>{{ element.status }}</b>
                                </span>
                            </td>
                        </ng-container> -->


                        <ng-container matColumnDef="Status" stickyEnd>
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white admin-Status-width admin-Status">
                              <div class="status-cell-wrapper">
                                <div class="status-vertical-bar"></div>
                                <div class="status-text">
                                  Status
                                </div>
                              </div>
                            </th>
                            <td mat-cell *matCellDef="let element" class="admin-Status">
                              <div class="status-cell-wrapper">
                                <div class="status-vertical-bar"></div>
                                <div class="status-text">
                                  <span *ngIf="element.status == 'Booked'" style="color: #146aa6;">
                                    <b>{{ element.status }}</b>
                                  </span>
                                  <span *ngIf="element.status == 'Completed'" style="color: green">
                                    <b>{{ element.status }}</b>
                                  </span>
                                  <span *ngIf="element.status == 'In Progress'" style="color: #ff4081">
                                    <b>{{ element.status }}</b>
                                  </span>
                                </div>
                              </div>
                            </td>
                          </ng-container>
                          

                        <!-- <ng-container matColumnDef="Status" stickyEnd>
                            <th
                              mat-header-cell
                              *matHeaderCellDef
                              class="text-lg text-white admin-Status-width admin-Status"
                              style="border-left: 2px solid #ccc;" 
                            >
                              Status
                            </th>
                            <td
                              mat-cell
                              *matCellDef="let element"
                              class="admin-Status"
                              style="border-left: 2px solid #ccc;" 
                            >
                              <span *ngIf="element.status == 'Booked'" style="color: #146aa6;">
                                <b>{{ element.status }}</b>
                              </span>
                              <span *ngIf="element.status == 'Completed'" style="color: green;">
                                <b>{{ element.status }}</b>
                              </span>
                              <span *ngIf="element.status == 'In Progress'" style="color: #ff4081;">
                                <b>{{ element.status }}</b>
                              </span>
                            </td>
                          </ng-container> -->
                          

                        <ng-container matColumnDef="Actions" stickyEnd>
                            <!-- Header Cell for the Actions Column -->
                            <th mat-header-cell *matHeaderCellDef class="text-lg text-white sticky-end-column">
                                Actions
                            </th>
                        
                            <!-- Data Cell for the Actions Column -->
                            <td mat-cell *matCellDef="let element" class="sticky-end-column">
                                <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
                                    <mat-icon>more_vert</mat-icon>
                                </button>
                        
                                <mat-menu #menu="matMenu">
                                    <!-- Receipt Button, visible for roleID 5 or 1 -->
                                    <button mat-menu-item *ngIf="roleID == '5' || roleID == '1'" (click)="onView(element)">
                                        <div>
                                            <mat-icon svgIcon="heroicons_solid:eye"></mat-icon>
                                            <span>Receipt</span>
                                        </div>
                                    </button>

                                    <button mat-menu-item  *ngIf="roleID == '2' && (element.modeofPaymentID != 5) && (element.duePayment == null || element.duePayment == '0.00') && element.doctorCompleted == null || element.doctorCompleted == 0"
                                    (click)="onRowClicked(element)">
                                      <mat-icon svgIcon="heroicons_solid:arrow-right"></mat-icon>
                                       <span>Start</span>
                                  </button>
                        
                                    <!-- Edit Button, visible if roleID is not 2 -->
                                    <button mat-menu-item *ngIf="(roleID !== '2' || roleID !== '5')" (click)="appointmentDrawer.toggle(); updateSelect(element)">
                                        <mat-icon svgIcon="heroicons_solid:pencil-alt"></mat-icon>
                                        <span>Edit</span>
                                    </button>
                        
                                    <!-- Print Button, visible for roleID 2 or 3, if doctorCompleted is 1 -->
                                    <button mat-menu-item *ngIf="roleID == '2' || (roleID == '3' && element.doctorCompleted == 1) || (roleID == '1' && element.doctorCompleted == 1)" 
                                            (click)="onRowPrintPresecptionClicked(element)">
                                        <mat-icon svgIcon="heroicons_solid:printer"></mat-icon>
                                        <span>Prescription</span>
                                    </button>

                                     <!-- Start Button for Role ID 2 -->
                                   <!-- <button mat-menu-item
                                    *ngIf="roleID == '2' && (row.modeofPaymentID != 5) && (row.duePayment == null || row.duePayment == '0.00')">
                                        <div style="cursor: pointer;"
                                     *ngIf="row.doctorCompleted == null || row.doctorCompleted == 0"
                                       (click)="onRowClicked(row)">Start
                                     </div>
                                  </button> -->
                                 
                        
                                    <!-- Delete Button, visible for roleID 1 and if status is not Completed -->
                                    <button mat-menu-item *ngIf="roleID == '1'" 
                                            (click)="deleteAppointment(element)">
                                        <mat-icon svgIcon="heroicons_solid:trash"></mat-icon>
                                        <span>Delete</span>
                                    </button>
                        
                                    <!-- View History Button -->
                                    <button mat-menu-item *ngIf="roleID !== '5'" (click)="onRowClicked(element)">
                                        <mat-icon svgIcon="heroicons_solid:eye"></mat-icon>
                                        <span>View History</span>
                                    </button>
                        
                                    <!-- Visits Button, visible for roleID 5 or 1 -->
                                    <button mat-menu-item *ngIf="roleID == '5' || roleID == '1'" (click)="onRowClicked(element)">
                                        <mat-icon svgIcon="heroicons_solid:calendar"></mat-icon> 
                                        <span>Visits</span>
                                    </button>
                                </mat-menu>
                            </td>
                        </ng-container>
                        

                        <tr mat-header-row class="height" *matHeaderRowDef="displayedColumns; sticky: true" style="background-color: #A9A9A9 ;"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

             <!-- No Data Row -->
    <!-- <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell text-center" [attr.colspan]="displayedColumns.length">
          No data available
        </td>
      </tr> -->
                </table>
               <mat-paginator class="scroolbar" *ngIf="Todays" #Paginator [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="100"
                showFirstLastButtons>
               </mat-paginator>
                  </div>


                  <div  *ngIf="isDoctor" class="example-container mat-elevation-z8 h-grid" #TABLE>
                    <table class='table1 scroolbar' mat-table [dataSource]="todaysbooked" matSort
                        (matSortChange)="sortData($event)">
                
                     
                        
                        <ng-container matColumnDef="SL">
                            <!-- <th mat-header-cell *matHeaderCellDef mat-sort-header="patientARCID"> -->
                
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                                    Patient ID
                            </th>
                            <td mat-cell *matCellDef="let element" style="cursor: pointer; color: #1469a6;" (click)="onRowClicked(element)">
                                {{ element.patientARCID }}
                            </td>
                        </ng-container>
                
                  <ng-container matColumnDef="Patient" sticky>
                           
                            <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                                <div class="patientDetails-cell-wrapper">
                                    <div class="patientDetails-text">
                               Patient Details
                            </div>
                            <div class="patientDetails-vertical-bar right-bar1"></div>
                          </div>
                            </th>
                            <td mat-cell *matCellDef="let element" >
                                <div class="patientDetails-cell-wrapper">
                                    <div class="patientDetails-text">
                                <span><b>{{ element.patient | titlecase }}</b></span>
                                ({{ element.gender | slice: 0:1 }}, {{ element.age }}y)
                                <br />
                                <ng-container *ngIf="roleID != 2">
                                    {{ element.mobile }}
                                </ng-container>
                            </div>
                            <div class="patientDetails-vertical-bar right-bar1"></div>
                          </div>
                            </td>
                        </ng-container>

                         <ng-container matColumnDef="ReceiptToken">
                            <th mat-header-cell *matHeaderCellDef class="text-lg text-white" style="padding-left: 10px;">
                               Token
                            </th>
                            <td mat-cell *matCellDef="let element" style="padding-left: 10px;">
                                <span>
                                    {{ element.receiptToken }}
                                </span>


                            </td>
                        </ng-container>
                
                        <ng-container matColumnDef="Service">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header style="padding-left: 10px; " class="text-lg text-white">
                                Service Name
                            </th>
                
                            <td mat-cell *matCellDef="let element" style="padding-left: 10px;">
                                <span>{{ element.serviceName }}</span>
                            </td>
                        </ng-container>
                
                        <ng-container style="margin: auto;" matColumnDef="Doctor">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg  text-white" >
                                    <span  *ngIf="roleID !='2' ">Doctor</span>
                
                            </th>
                
                            <td mat-cell *matCellDef="let element" >
                                <span *ngIf="roleID !='2' ">{{ element.doctor }}</span>
                            </td>
                        </ng-container>
                
                        <ng-container style="margin: auto;" matColumnDef="Time">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg  text-white">
                                Slot Time
                            </th>
                            <td mat-cell *matCellDef="let element" >
                
                                <span>{{ element.slotTime }}</span>
                            </td>
                        </ng-container>
                
                        <ng-container matColumnDef="WaitingTime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="visit" class="text-lg  text-white">
                                Waiting Time
                            </th>
                            <td mat-cell *matCellDef="let element" class="visit">
                                <span *ngIf="element.waitingTime !=0.00">
                                    <b> {{ element.waitingTime }} </b>
                                    <!-- <b> {{ element.waitingTime | slice:0:4 }} </b> -->
                                </span>
                                <span *ngIf="element.waitingTime ==0">
                                    -
                                </span>
                
                            </td>
                        </ng-container>

                        <ng-container style="margin: auto;" matColumnDef="BookingTime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg  text-white">
                                Booking Time
                            </th>
                            <td mat-cell *matCellDef="let element" >
                                <span>{{ formatCustomDate(element.createdDate).split(', ')[2] }}</span>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="LastVisit">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                               Last Visit
                            </th>
                
                            <!-- <td mat-cell *matCellDef="let element" >
                                <span>{{ element.lastVisitDate | date }} {{ element.lastVisitDate | date:'HH:mm'
                                    }}</span>
                            </td> -->
                            <td mat-cell *matCellDef="let element" >
                                <span>{{ element.lastVisitDate | date }}</span>
                            </td>
                        </ng-container>
                     
                        <ng-container matColumnDef="VisitCount">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                                Visit Count#
                            </th>
                            <td mat-cell *matCellDef="let element" class="visit">
                                <span>
                                    {{ element.visitCount }}
                                </span>
                
                
                            </td>
                        </ng-container>
                
                <ng-container matColumnDef="Vitals" >
                    <th mat-header-cell *matHeaderCellDef class="text-lg text-white ">
                        
                    </th>
                    <td mat-cell class="w-10" *matCellDef="let row">
                        <!-- Button to Update Vitals -->
                        <button mat-button *ngIf="roleID == '5' && row.vitalsID && row.status !== 'Completed'"
                            (click)="vitalsDrawer.toggle(); $event.stopPropagation()">
                            <div *ngIf="row.vitalsID" style="color: green" (click)="setValues(row)">
                                Update Vitals
                            </div>
                        </button>
                
                        <!-- Button to Add Vitals -->
                        <button mat-button
                            *ngIf="roleID == '5' && (row.modeofPaymentID != 5) && (row.duePayment == null || row.duePayment == '0.00') && !row.vitalsID && row.status !== 'Completed'"
                            (click)="vitalsDrawer.toggle(); $event.stopPropagation()">
                            <div style="color: #ff4081"
                                *ngIf="(row.modeofPaymentID != 5) && (row.duePayment == null || row.duePayment == '0.00') && !row.vitalsID"
                                (click)="rowData(row)">
                                Add Vitals
                            </div>
                        </button>
                
                        <!-- Message when Update is Not Possible -->
                        <div *ngIf="roleID == '5' && row.status === 'Completed'" style="color: green">
                            Cannot Update
                        </div>
                
                       
                    </td>
                </ng-container>
                
                
                        <ng-container matColumnDef="Status" stickyEnd>
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white Doc-head-width Doc-Statuus sticky-end-column">
                                <div class="status-cell-wrapper">
                                    <div class="status-vertical-bar"></div>
                                    <div class="status-text">
                                Status
                                </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let element" class="sticky-end-column Doc-Statuus">
                                <div class="status-cell-wrapper">
                                    <div class="status-vertical-bar"></div>
                                    <div class="status-text">
                                <span *ngIf="element.status == 'Booked'" style="color: #146aa6;">
                                    <b>{{ element.status }}</b>
                                </span>
                                <span *ngIf="element.status == 'Completed'" style="color: green">
                                    <b>{{ element.status }}</b>
                                </span>
                                <span *ngIf="element.status == 'In Progress'" style="color: #ff4081">
                                    <b>{{ element.status }}</b>
                                </span>
                                </div>
                                </div>
                            </td>
                        </ng-container>
                
                        <ng-container matColumnDef="Actions" stickyEnd>
                            <!-- Header Cell for the Actions Column -->
                            <th mat-header-cell *matHeaderCellDef class="text-lg dr-Status-width text-white sticky-end-column">
                                Actions
                            </th>
                        
                            <!-- Data Cell for the Actions Column -->
                            <td mat-cell *matCellDef="let element" class="sticky-end-column">

                                
                                <!-- <button mat-flat-button *ngIf="roleID == '2' && (element.modeofPaymentID != 5) && (element.duePayment == null || element.duePayment == '0.00') && element.doctorCompleted == null || element.doctorCompleted == 0"
                                    (click)="onRowClicked(element)">
                                      Start
                                  </button>
                                

                                <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
                                    <mat-icon>more_vert</mat-icon>
                                </button> -->


                                <div class="button-container">
                                    <!-- <button mat-flat-button
                                            *ngIf="roleID == '2' && (element.modeofPaymentID != 5) && (element.duePayment == null || element.duePayment == '0.00') && (element.doctorCompleted == null || element.doctorCompleted == 0)"
                                            (click)="onRowClicked(element)">
                                      Start
                                    </button> -->

                                    <button mat-flat-button
                                            *ngIf="roleID == '2' && (element.status == 'In Progress')"
                                            (click)="onRowClicked(element)">
                                      Start
                                    </button>

                                    <button mat-flat-button class="disabled-button" 
                                            *ngIf="roleID == '2' && (element.status == 'Booked')"
                                            disabled>
                                      Start
                                    </button>

                
                                    <!-- <button mat-flat-button style="color: white;"
                                            *ngIf="roleID == '2' && element.doctorCompleted == 1"
                                            (click)="onRowClicked(element)">
                                      Done
                                    </button> -->

                                    <button mat-flat-button class="green-button"
                                            *ngIf="roleID == '2' && element.doctorCompleted == 1"
                                            (click)="onRowClicked(element)">
                                      Done
                                    </button>                                  
                                    
                                
                                    <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
                                      <mat-icon>more_vert</mat-icon>
                                    </button>
                                  </div>


                        
                                <mat-menu #menu="matMenu">
                                    <!-- Receipt Button, visible for roleID 5 or 1 -->
                                    <button mat-menu-item *ngIf="roleID == '5' || roleID == '1'" (click)="onView(element)">
                                        <div>
                                            <mat-icon svgIcon="heroicons_solid:eye"></mat-icon>
                                            <span>Receipt</span>
                                        </div>
                                    </button>
                
                                    <!-- <button mat-menu-item  *ngIf="roleID == '2' && (element.modeofPaymentID != 5) && (element.duePayment == null || element.duePayment == '0.00') && element.doctorCompleted == null || element.doctorCompleted == 0"
                                    (click)="onRowClicked(element)">
                                      <mat-icon svgIcon="heroicons_solid:arrow-right"></mat-icon>
                                       <span>Start</span>
                                  </button> -->
                        
                                    <!-- Edit Button, visible if roleID is not 2 -->
                                    <button mat-menu-item *ngIf="(roleID !== '2' || roleID !== '5') && element.status !== 'Completed'" (click)="appointmentDrawer.toggle(); updateSelect(element)">
                                        <mat-icon svgIcon="heroicons_solid:pencil-alt"></mat-icon>
                                        <span>Edit</span>
                                    </button>
                        
                                    <!-- Print Button, visible for roleID 2 or 3, if doctorCompleted is 1 -->
                                    <button mat-menu-item *ngIf="roleID == '2' && element.status != 'Booked' || (roleID == '3' && element.doctorCompleted == 1)" 
                                            (click)="onRowPrintPresecptionClicked(element)">
                                        <mat-icon svgIcon="heroicons_solid:printer"></mat-icon>
                                        <span>Prescription</span>
                                    </button>
                
                                   
                        
                                    <!-- Delete Button, visible for roleID 1 and if status is not Completed -->
                                    <button mat-menu-item *ngIf="roleID == '1' && element.status !== 'Completed'" 
                                            (click)="deleteAppointment(element)">
                                        <mat-icon svgIcon="heroicons_solid:trash"></mat-icon>
                                        <span>Delete</span>
                                    </button>
                        
                                    <!-- View History Button -->
                                    <button mat-menu-item *ngIf="roleID !== '5'" (click)="onRowClicked(element)">
                                        <mat-icon svgIcon="heroicons_solid:eye"></mat-icon>
                                        <span>View History</span>
                                    </button>
                        
                                    <!-- Visits Button, visible for roleID 5 or 1 -->
                                    <button mat-menu-item *ngIf="roleID == '5' || roleID == '1'" (click)="onRowClicked(element)">
                                        <mat-icon svgIcon="heroicons_solid:calendar"></mat-icon> 
                                        <span>Visits</span>
                                    </button>
                                </mat-menu>
                            </td>
                        </ng-container>
                        
                
                        <tr mat-header-row class="height" *matHeaderRowDef="displayedColumns; sticky: true" style="background-color: #A9A9A9 ;"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

                 <!-- No Data Row -->
    <!-- <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell text-center" [attr.colspan]="displayedColumns.length">
          No data available
        </td>
      </tr> -->
                </table>
                <mat-paginator class="scroolbar"  #Paginator [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="100"
                showFirstLastButtons>
                </mat-paginator>
                  </div>
              

                  <!-- <div *ngIf="!Todays" style="text-align: center;">
                <div class="center-container">
                    <img class="w-16" style="opacity: 0.5;" src="assets/images/logo/imgs1.svg" alt="Fuse logo">

                </div>
                <br>
                <div class="center-container1">
                    <h2 style="color: #146aa6;    margin-top: -59px;">
                        <b>No Appointments Found </b>
                    </h2>
                </div>

            </div> -->

                  <div *ngIf="isFrontDesk"  class="example-container mat-elevation-z8 h-grid" #TABLE>
                    <table class='table1 scroolbar' mat-table [dataSource]="todaysbooked" matSort
                        (matSortChange)="sortData($event)">

                     
                        
                        <ng-container matColumnDef="SL">

                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                                    Patient ID
                            </th>
                            <td mat-cell *matCellDef="let element" style="cursor: pointer; color: #1469a6;" (click)="onRowClicked(element)">
                                {{ element.patientARCID }}
                            </td>
                        </ng-container>

                  <ng-container matColumnDef="Patient" sticky>
                           
                            <th mat-header-cell *matHeaderCellDef style="width:350px" class="text-lg text-white">
                                <div class="patientDetails-cell-wrapper">
                                    <div class="patientDetails-text">
                               Patient Details
                            </div>
                            <div class="patientDetails-vertical-bar right-barh"></div>
                          </div>
                            </th>
                            <td mat-cell *matCellDef="let element" >
                                <div class="patientDetails-cell-wrapper">
                                    <div class="patientDetails-text">
                                <span><b>{{ element.patient | titlecase }}</b></span>
                                ({{ element.gender | slice: 0:1 }}, {{ element.age }}y)
                                <br />
                                <ng-container *ngIf="roleID != 2">
                                    {{ element.mobile }}
                                </ng-container>
                            </div>
                            <div class="patientDetails-vertical-bar right-bar"></div>
                          </div>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="ReceiptToken">
                            <th mat-header-cell *matHeaderCellDef class="text-lg text-white" style="padding-left: 10px;">
                               Token
                            </th>
                            <td mat-cell *matCellDef="let element" style="padding-left: 10px;">
                                <span>
                                    {{ element.receiptToken }}
                                </span>


                            </td>
                        </ng-container>

                        <ng-container matColumnDef="Service">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header style="padding-left: 10px; width:350px" class="text-lg text-white">
                                Service Name
                            </th>

                            <td mat-cell *matCellDef="let element" style="padding-left: 10px;">
                                <span>{{ element.serviceName }}</span>
                            </td>
                        </ng-container>

                        <ng-container style="margin: auto;" matColumnDef="Doctor">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white" >
                                    <span  *ngIf="roleID !='2' ">Doctor</span>

                            </th>

                            <td mat-cell *matCellDef="let element" >
                                <span *ngIf="roleID !='2' ">{{ element.doctor }}</span>
                            </td>
                        </ng-container>

                        <ng-container style="margin: auto;" matColumnDef="Time">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                                Slot Time
                            </th>
                            <td mat-cell *matCellDef="let element" >

                                <span>{{ element.slotTime }}</span>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="WaitingTime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="visit" class="text-lg text-white">
                                Waiting Time
                            </th>
                            <td mat-cell *matCellDef="let element" class="visit">
                                <span *ngIf="element.waitingTime !=0.00">
                                    <b> {{ element.waitingTime }} </b>
                                </span>
                                <span *ngIf="element.waitingTime ==0">
                                    -
                                </span>

                            </td>
                        </ng-container>

                        <ng-container style="margin: auto;" matColumnDef="BookingTime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                                Booking Time
                            </th>
                            <td mat-cell *matCellDef="let element" >
                                <span>{{ formatCustomDate(element.createdDate).split(', ')[2] }}</span>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="LastVisit">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                               Last Visit
                            </th>

                            <!-- <td mat-cell *matCellDef="let element" >
                                <span>{{ element.lastVisitDate | date }} {{ element.lastVisitDate | date:'HH:mm'
                                    }}</span>
                            </td> -->
                            <td mat-cell *matCellDef="let element" >
                                <span>{{ element.lastVisitDate | date }}</span>
                            </td>
                        </ng-container>
                     
                        <ng-container matColumnDef="VisitCount">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                                Visit Count#
                            </th>
                            <td mat-cell *matCellDef="let element" class="visit">
                                <span>
                                    {{ element.visitCount }}
                                </span>


                            </td>
                        </ng-container>


                        <ng-container matColumnDef="Billing">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                                Billing
                            </th>

                            <td mat-cell *matCellDef="let element" >
                                {{ element.payment }}
                            </td>
                        </ng-container>
                        
                        <ng-container matColumnDef="DuePayment">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white ">
                                Due Payment
                            </th>

                            <td mat-cell *matCellDef="let element" style="cursor: pointer;">

                                <div
                                    *ngIf="(element.modeofPaymentID != 5) && (element.duePayment == null || element.duePayment == '0.00')">

                                    <div style="color: green;">Paid</div>
                                </div>
                                <span
                                    *ngIf="(roleID=='1' ||roleID=='3')  && element.modeofPaymentID == 5 && element.duePayment == '0.00'"
                                    style="color: #ff4081;" (click)="appointmentDrawer.toggle();updateSelect(element)">
                                    <mat-icon style="color: #ff4081;">payment</mat-icon>
                                    Pay
                                </span>
                                <span
                                    *ngIf="(roleID=='5')  && element.modeofPaymentID == 5 && element.duePayment == '0.00'"
                                    style="color: #ff4081;">
                                    <mat-icon style="color: #ff4081;">payment</mat-icon>
                                    Pay
                                </span>
                                <span
                                    *ngIf="(roleID=='2')  && element.modeofPaymentID == 5 && element.duePayment == '0.00'"
                                    style="color: #ff4081;">
                                    <mat-icon style="color: #ff4081;">payment</mat-icon>
                                </span>

                                <span *ngIf="element.duePayment != null && element.duePayment != '0.00'"
                                    style="color: #ff4081;"
                                    (click)="appointmentDrawer.toggle();updateSelectDuePay(element)">
                                    <mat-icon style="color: #ff4081;">payment</mat-icon>
                                    <span> {{ element.duePayment }}</span>

                                </span>

                            </td>
                        </ng-container>


                <ng-container matColumnDef="Vitals" >
                    <th mat-header-cell *matHeaderCellDef class="text-lg text-white ">
                        
                    </th>
                    <td mat-cell class="w-10" *matCellDef="let row">
                        <button mat-button *ngIf="roleID == '5' && row.vitalsID && row.status !== 'Completed'"
                            (click)="vitalsDrawer.toggle(); $event.stopPropagation()">
                            <div *ngIf="row.vitalsID" style="color: green" (click)="setValues(row)">
                                Update Vitals
                            </div>
                        </button>
                
                        <button mat-button
                            *ngIf="roleID == '5' && (row.modeofPaymentID != 5) && (row.duePayment == null || row.duePayment == '0.00') && !row.vitalsID && row.status !== 'Completed'"
                            (click)="vitalsDrawer.toggle(); $event.stopPropagation()">
                            <div style="color: #ff4081"
                                *ngIf="(row.modeofPaymentID != 5) && (row.duePayment == null || row.duePayment == '0.00') && !row.vitalsID"
                                (click)="rowData(row)">
                                Add Vitals
                            </div>
                        </button>
                
                        <div *ngIf="roleID == '5' && row.status === 'Completed'" style="color: green">
                            Cannot Update
                        </div>
                
                       
                    </td>
                </ng-container>

                        <ng-container matColumnDef="View" >
                            <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                                Receipt 2
                            </th>
                            <td mat-cell class="w-30 " *matCellDef="let row">
                                <button mat-button *ngIf="roleID == '5' || roleID == '1'" (click)="onRowClicked(row)">
                                    Visits
                                </button>
                        
                                <button mat-button *ngIf="roleID == '2' || roleID == '3' && row.doctorCompleted == 1" 
                                        matTooltip="Print" 
                                        (click)="onRowPrintPresecptionClicked(row)">
                                    <mat-icon>print</mat-icon>
                                </button>

                                
                            </td>
                        </ng-container>
                        

                        <ng-container matColumnDef="History"  stickyEnd>
                            <th mat-header-cell *matHeaderCellDef style="width:150px" class="text-lg frdes-History  text-white">
                                History
                            </th>

                            <td class="frdes-History " mat-cell *matCellDef="let element">
                               
                                <button mat-button>
                                    <div style="color: #146aa6" (click)="onRowClicked(element)"><mat-icon
                                            [matTooltipPosition]="'right'" [matTooltip]="tooltip || 'View History'"
                                            svgIcon="heroicons_solid:eye" #file style="color:#146aa6">
                                        </mat-icon></div><!--view-->
                                </button>

                            </td>
                        </ng-container>


                        <ng-container matColumnDef="Status" stickyEnd>
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white frdes-Status-width frdes-Status">
                                <div class="status-cell-wrapper">
                                    <div class="status-vertical-bar"></div>
                                    <div class="status-text">
                                Status
                            </div>
                        </div>
                            </th>
                            <td mat-cell *matCellDef="let element" class="frdes-Status">
                                <div class="status-cell-wrapper">
                                    <div class="status-vertical-bar"></div>
                                    <div class="status-text">
                                <span *ngIf="element.status == 'Booked'" style="color: #146aa6;">
                                    <b>{{ element.status }}</b>
                                </span>
                                <span *ngIf="element.status == 'Completed'" style="color: green">
                                    <b>{{ element.status }}</b>
                                </span>
                                <span *ngIf="element.status == 'In Progress'" style="color: #ff4081">
                                    <b>{{ element.status }}</b>
                                </span>
                            </div>
                        </div>
                            </td>
                        </ng-container>

                        
                        <ng-container matColumnDef="Actions" stickyEnd>
                            <!-- Header Cell for the Actions Column -->
                            <th mat-header-cell *matHeaderCellDef class="text-lg text-white  sticky-end-column">
                                Actions
                            </th>
                        
                            <!-- Data Cell for the Actions Column -->
                            <td mat-cell *matCellDef="let element" class="sticky-end-column ">
                                <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
                                    <mat-icon>more_vert</mat-icon>
                                </button>
                        
                                <mat-menu #menu="matMenu">

                                    <button mat-menu-item (click)="onView(element)">
                                        <div>
                                            <mat-icon svgIcon="heroicons_solid:eye"></mat-icon>
                                            <span>Receipt</span>
                                        </div>
                                    </button>

                                    <button mat-menu-item *ngIf="element.doctorCompleted == 1" (click)="onRowPrintPresecptionClicked(element)">
                                        <div>
                                            <mat-icon >print</mat-icon>
                                            <span>Prescription</span>
                                        </div>
                                    </button>

                                    <button mat-menu-item *ngIf="(roleID !== '2' || roleID !== '5') && element.status !== 'Completed'" (click)="appointmentDrawer.toggle(); updateSelect(element)">
                                        <mat-icon svgIcon="heroicons_solid:pencil-alt"></mat-icon>
                                        <span>Edit</span>
                                    </button>
                                    
                                    <button mat-menu-item 
                                    (click)="onRowClicked(element)">
                                      <mat-icon svgIcon="heroicons_solid:eye"></mat-icon>
                                       <span>History</span>
                                  </button>
                        
                                </mat-menu>
                            </td>
                        </ng-container>
                        

                        <tr mat-header-row class="height" *matHeaderRowDef="displayedColumns; sticky: true" style="background-color: #A9A9A9 ;"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

            <!-- No Data Row -->
    <!-- <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell text-center" [attr.colspan]="displayedColumns.length">
          No data available
        </td>
      </tr> -->
        </table>
        <mat-paginator class="scroolbar" *ngIf="Todays" #Paginator [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="100"
        showFirstLastButtons>
        </mat-paginator>
                  </div>


                  <div *ngIf="isjrDoctor"  class="example-container mat-elevation-z8 h-grid" #TABLE>
                    <table class='table1 scroolbar' mat-table [dataSource]="todaysbooked" matSort
                        (matSortChange)="sortData($event)">

                     
                        
                        <ng-container matColumnDef="SL">

                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                                    Patient ID
                            </th>
                            <td mat-cell *matCellDef="let element" style="cursor: pointer; color: #1469a6;" (click)="onRowClicked(element)">
                                {{ element.patientARCID }}
                            </td>
                        </ng-container>

                  <ng-container matColumnDef="Patient" sticky>
                           
                            <th mat-header-cell *matHeaderCellDef style="width:350px" class="text-lg text-white">
                                <div class="patientDetails-cell-wrapper">
                                    <div class="patientDetails-text">
                               Patient Details
                            </div>
                            <div class="patientDetails-vertical-bar right-barh"></div>
                          </div>
                            </th>
                            <td mat-cell *matCellDef="let element" >
                                <div class="patientDetails-cell-wrapper">
                                    <div class="patientDetails-text">
                                <span><b>{{ element.patient | titlecase }}</b></span>
                                ({{ element.gender | slice: 0:1 }}, {{ element.age }}y)
                                <br />
                                <ng-container *ngIf="roleID != 2">
                                    {{ element.mobile }}
                                </ng-container>
                            </div>
                            <div class="patientDetails-vertical-bar right-bar"></div>
                          </div>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="ReceiptToken">
                            <th mat-header-cell *matHeaderCellDef class="text-lg text-white" style="padding-left: 10px;">
                               Token
                            </th>
                            <td mat-cell *matCellDef="let element" style="padding-left: 10px;">
                                <span>
                                    {{ element.receiptToken }}
                                </span>


                            </td>
                        </ng-container>

                        <ng-container matColumnDef="Service">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header style="padding-left: 10px; width:350px" class="text-lg text-white">
                                Service Name
                            </th>

                            <td mat-cell *matCellDef="let element" style="padding-left: 10px;">
                                <span>{{ element.serviceName }}</span>
                            </td>
                        </ng-container>

                        <ng-container style="margin: auto;" matColumnDef="Doctor">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white" >
                                    <span  *ngIf="roleID !='2' ">Doctor</span>

                            </th>

                            <td mat-cell *matCellDef="let element" >
                                <span *ngIf="roleID !='2' ">{{ element.doctor }}</span>
                            </td>
                        </ng-container>

                        <ng-container style="margin: auto;" matColumnDef="Time">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                                Slot Time
                            </th>
                            <td mat-cell *matCellDef="let element" >

                                <span>{{ element.slotTime }}</span>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="WaitingTime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="visit" class="text-lg text-white">
                                Waiting Time
                            </th>
                            <td mat-cell *matCellDef="let element" class="visit">
                                <span *ngIf="element.waitingTime !=0.00">
                                    <b> {{ element.waitingTime }} </b>
                                </span>
                                <span *ngIf="element.waitingTime ==0">
                                    -
                                </span>

                            </td>
                        </ng-container>

                        <ng-container style="margin: auto;" matColumnDef="BookingTime">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                                Booking Time
                            </th>
                            <td mat-cell *matCellDef="let element" >
                                <span>{{ formatCustomDate(element.createdDate).split(', ')[2] }}</span>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="LastVisit">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                               Last Visit
                            </th>

                            <!-- <td mat-cell *matCellDef="let element" >
                                <span>{{ element.lastVisitDate | date }} {{ element.lastVisitDate | date:'HH:mm'
                                    }}</span>
                            </td> -->
                            <td mat-cell *matCellDef="let element" >
                                <span>{{ element.lastVisitDate | date }}</span>
                            </td>
                        </ng-container>
                     
                        <ng-container matColumnDef="VisitCount">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                                Visit Count#
                            </th>
                            <td mat-cell *matCellDef="let element" class="visit">
                                <span>
                                    {{ element.visitCount }}
                                </span>


                            </td>
                        </ng-container>


                        <ng-container matColumnDef="Billing">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white">
                                Billing
                            </th>

                            <td mat-cell *matCellDef="let element" >
                                {{ element.payment }}
                            </td>
                        </ng-container>
                        
                        <ng-container matColumnDef="DuePayment">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white ">
                                Due Payment
                            </th>

                            <td mat-cell *matCellDef="let element" style="cursor: pointer;">

                                <div
                                    *ngIf="(element.modeofPaymentID != 5) && (element.duePayment == null || element.duePayment == '0.00')">

                                    <div style="color: green;">Paid</div>
                                </div>
                                <span
                                    *ngIf="(roleID=='1' ||roleID=='3')  && element.modeofPaymentID == 5 && element.duePayment == '0.00'"
                                    style="color: #ff4081;" (click)="appointmentDrawer.toggle();updateSelect(element)">
                                    <mat-icon style="color: #ff4081;">payment</mat-icon>
                                    Pay
                                </span>
                                <span
                                    *ngIf="(roleID=='5')  && element.modeofPaymentID == 5 && element.duePayment == '0.00'"
                                    style="color: #ff4081;">
                                    <mat-icon style="color: #ff4081;">payment</mat-icon>
                                    Pay
                                </span>
                                <span
                                    *ngIf="(roleID=='2')  && element.modeofPaymentID == 5 && element.duePayment == '0.00'"
                                    style="color: #ff4081;">
                                    <mat-icon style="color: #ff4081;">payment</mat-icon>
                                </span>

                                <span *ngIf="element.duePayment != null && element.duePayment != '0.00'"
                                    style="color: #ff4081;"
                                    (click)="appointmentDrawer.toggle();updateSelectDuePay(element)">
                                    <mat-icon style="color: #ff4081;">payment</mat-icon>
                                    <span> {{ element.duePayment }}</span>

                                </span>

                            </td>
                        </ng-container>


                <ng-container matColumnDef="Vitals" stickyEnd>
                    <th mat-header-cell *matHeaderCellDef class="text-lg jrDr-Vitals-width jrDr-Vitals text-white ">
                        Vitals
                    </th>
                    <td mat-cell class=" jrDr-Vitals " *matCellDef="let row">
                        <button class=" w-30 border h-8 rounded-2xl" *ngIf="roleID == '5' && row.vitalsID && row.status !== 'Completed'"
                            (click)="vitalsDrawer.toggle(); $event.stopPropagation()">
                            <div *ngIf="row.vitalsID" style="color: green" (click)="setValues(row)">
                                Update Vitals
                            </div>
                        </button>
                
                        <button class=" w-30 border h-8 rounded-2xl"
                            *ngIf="roleID == '5' && (row.modeofPaymentID != 5) && (row.duePayment == null || row.duePayment == '0.00') && !row.vitalsID && row.status !== 'Completed'"
                            (click)="vitalsDrawer.toggle(); $event.stopPropagation()">
                            <div style="color: #ff4081"
                                *ngIf="(row.modeofPaymentID != 5) && (row.duePayment == null || row.duePayment == '0.00') && !row.vitalsID"
                                (click)="rowData(row)">
                                Add Vitals
                            </div>
                        </button>
                
                        <div *ngIf="roleID == '5' && row.status === 'Completed'" style="color: green; margin-left: 10%;">
                            Not Applicable
                        </div>
                    </td>
                </ng-container>

                        <ng-container matColumnDef="View" >
                            <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                                Receipt 3
                            </th>
                            <td mat-cell class="w-30 " *matCellDef="let row">
                                <button mat-button *ngIf="roleID == '5' || roleID == '1'" (click)="onRowClicked(row)">
                                    Visits
                                </button>
                        
                                <button mat-button *ngIf="roleID == '2' || roleID == '3' && row.doctorCompleted == 1" 
                                        matTooltip="Print" 
                                        (click)="onRowPrintPresecptionClicked(row)">
                                    <mat-icon>print</mat-icon>
                                </button>

                                
                            </td>
                        </ng-container>
     
                        <ng-container matColumnDef="Status" stickyEnd>
                            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-lg text-white jrDr-Status">
                                <div class="status-cell-wrapper">
                                    <div class="status-vertical-bar"></div>
                                    <div class="status-text">
                                Status
                                </div>
                                </div>
                            </th>
                            <td mat-cell *matCellDef="let element" class="jrDr-Status">
                                <div class="status-cell-wrapper">
                                    <div class="status-vertical-bar"></div>
                                    <div class="status-text">
                                <span *ngIf="element.status == 'Booked'" style="color: #146aa6;">
                                    <b>{{ element.status }}</b>
                                </span>
                                <span *ngIf="element.status == 'Completed'" style="color: green">
                                    <b>{{ element.status }}</b>
                                </span>
                                <span *ngIf="element.status == 'In Progress'" style="color: #ff4081">
                                    <b>{{ element.status }}</b>
                                </span>
                                </div>
                                </div>
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="Actions" stickyEnd>
                            <!-- Header Cell for the Actions Column -->
                            <th mat-header-cell *matHeaderCellDef class="text-lg text-white sticky-end-column">
                                Actions
                            </th>
                        
                            <!-- Data Cell for the Actions Column -->
                            <td mat-cell *matCellDef="let element" class="sticky-end-column">
                                <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
                                    <mat-icon>more_vert</mat-icon>
                                </button>
                        
                                <mat-menu #menu="matMenu">
                                    <!-- Receipt Button, visible for roleID 5 or 1 -->
                                    <button mat-menu-item *ngIf="roleID == '5' || roleID == '1'" (click)="onView(element)">
                                        <div>
                                            <mat-icon svgIcon="heroicons_solid:eye"></mat-icon>
                                            <span>Receipt</span>
                                        </div>
                                    </button>

                                
                        
                                    <!-- Edit Button, visible if roleID is not 2 -->
                                    <button mat-menu-item *ngIf="(roleID !== '2' || roleID !== '5') && element.status !== 'Completed'" (click)="appointmentDrawer.toggle(); updateSelect(element)">
                                        <mat-icon svgIcon="heroicons_solid:pencil-alt"></mat-icon>
                                        <span>Edit</span>
                                    </button>

                                    <button mat-menu-item 
                                    (click)="onRowClicked(element)">
                                      <mat-icon svgIcon="heroicons_solid:eye"></mat-icon>
                                       <span>History</span>
                                  </button>
                        
                                    <!-- Print Button, visible for roleID 2 or 3, if doctorCompleted is 1 -->
                                    <button mat-menu-item *ngIf="roleID == '2' || (roleID == '3' && element.doctorCompleted == 1) || (roleID == '5' && element.doctorCompleted == 1)" 
                                            (click)="onRowPrintPresecptionClicked(element)">
                                        <mat-icon svgIcon="heroicons_solid:printer"></mat-icon>
                                        <span>Prescription</span>
                                    </button>

                                     <!-- Start Button for Role ID 2 -->
                                   <!-- <button mat-menu-item
                                    *ngIf="roleID == '2' && (row.modeofPaymentID != 5) && (row.duePayment == null || row.duePayment == '0.00')">
                                        <div style="cursor: pointer;"
                                     *ngIf="row.doctorCompleted == null || row.doctorCompleted == 0"
                                       (click)="onRowClicked(row)">Start
                                     </div>
                                  </button> -->
                                 
                        
                                    <!-- Delete Button, visible for roleID 1 and if status is not Completed -->
                                    <button mat-menu-item *ngIf="roleID == '1' && element.status !== 'Completed'" 
                                            (click)="deleteAppointment(element)">
                                        <mat-icon svgIcon="heroicons_solid:trash"></mat-icon>
                                        <span>Delete</span>
                                    </button>
                        
                                    <!-- View History Button -->
                                    <button mat-menu-item *ngIf="roleID !== '5'" (click)="onRowClicked(element)">
                                        <mat-icon svgIcon="heroicons_solid:eye"></mat-icon>
                                        <span>View History</span>
                                    </button>
                        
                                    <!-- Visits Button, visible for roleID 5 or 1 -->
                                    <button mat-menu-item *ngIf="roleID == '5' || roleID == '1'" (click)="onRowClicked(element)">
                                        <mat-icon svgIcon="heroicons_solid:calendar"></mat-icon> 
                                        <span>Visits</span>
                                    </button>
                                </mat-menu>
                            </td>
                        </ng-container>
                        

                        <tr mat-header-row class="height" *matHeaderRowDef="displayedColumns; sticky: true" style="background-color: #A9A9A9 ;"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            <!-- <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell text-center" [attr.colspan]="displayedColumns.length">
                  No data available
                </td>
              </tr> -->
            
        </table>
        <mat-paginator class="scroolbar" *ngIf="Todays" #Paginator [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="100"
        showFirstLastButtons>
        </mat-paginator>
                  </div>
           </div>

           <div *ngIf="!Todays" style="text-align: center;">
            <div class="center-container">
                <img class="w-16" style="opacity: 0.5;" src="assets/images/logo/imgs1.svg" alt="Fuse logo">

            </div>
            <br>
            <div class="center-container1">
                <h2 style="color: #146aa6;    margin-top: -59px;">
                    <b>No Appointments Found </b>
                </h2>
            </div>

        </div>
         
            <!-- <div *ngIf="!Todays" style="text-align: center;">
                <div class="center-container">
                    <img class="w-16" style="opacity: 0.5;" src="assets/images/logo/imgs1.svg" alt="Fuse logo">

                </div>
                <br>
                <div class="center-container1">
                    <h2 style="color: #146aa6;    margin-top: -59px;">
                        <b>No Appointments Found </b>
                    </h2>
                </div>

            </div> -->


            <div [ngClass]="{'hidediv': Todays, 'showdic': !Todays}">


                <!-- <mat-paginator *ngIf="Todays" #Paginator [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="100"
                    showFirstLastButtons>
                </mat-paginator> -->
            </div>
        </mat-tab>


        <mat-tab label="Upcoming Bookings">
            <div class="flex flex-cols justify-between">
                <div class="flex flex-cols">
                    <mat-form-field *ngIf="upcomings" class="col-span-2 search1 custom-background" appearance="outline">
                        <mat-icon matPrefix>perm_identity</mat-icon>
                        <input matInput type="text" [(ngModel)]="searchKey1" (keyup)="doFilter(searchKey1,2)"
                            placeholder="Search Profile">
                        <button mat-button *ngIf="searchKey1" matSuffix (click)="clearSearch()">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                </div>

                <!-- <button style="margin-left: 50%;" *ngIf="roleID == 1 || roleID == 3" class="fuse-mat-button-rounded mt-1" mat-flat-button
                    [color]="'primary'" (click)="appointmentDrawer.toggle();actionFormName('New Appointment')">
                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:plus'"></mat-icon>
                    <span class="ml-2">New Appointment</span>
                </button> -->

                <ng-container *ngIf="upcomings">
                    <mat-form-field class="custom-background" appearance="outline">
                        <!-- <mat-label>Select Columns</mat-label> -->
                        <mat-select  multiple [(ngModel)]="selectedColumnsupcoming" (selectionChange)="updateDisplayedColumnsupcoming()">
                          <mat-select-trigger>
                            <span>Select Columns</span>
                          </mat-select-trigger>
                          <mat-option style="color: #212121; font-weight: 500;" *ngFor="let column of columnDefinitionsupcoming" [value]="column.def" [disabled]="column.def === 'Actions' || column.def === 'Vitals'">
                            {{ column.displayName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                   </ng-container>

            </div>

            <div *ngIf="upcomings" class="table1 example-container mat-elevation-z8 h-grid">
                
                <table class="" mat-table [dataSource]="upcomingBookings" matSort>
                    <!-- Position Column -->

                    <ng-container matColumnDef="SL">
                        <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                            Patient ID
                        </th>
                        <td mat-cell *matCellDef="let element" style="cursor: pointer; color: #1469a6;" (click)="onRowClicked(element)">
                            {{ element.patientARCID }}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="Patient">
                        <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                            Patient Details
                        </th>

                        <td mat-cell *matCellDef="let element">
                            <span><b>{{ element.patient | titlecase}}</b></span>
                            ({{ element.gender | slice:0:1}}, {{ element.age }}y)
                            <br />
                            <!--<mat-icon style="font-size: 20px ;"> call</mat-icon>-->
                            {{ element.mobile }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="Service">
                        <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                            Service Name
                        </th>

                        <td mat-cell *matCellDef="let element">
                            <span>{{ element.serviceName }}</span>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="Doctor">
                        <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                            Doctor
                        </th>

                        <td mat-cell *matCellDef="let element">
                            <span>{{ element.doctor }}</span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="Time">
                        <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                            Slot Time
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <div class="row">
                                <div class="col-lg-1">
                                    <mat-icon style="font-size: 20px ;margin-top: 9px;"
                                        class="text-lg text-white">watch_later</mat-icon>
                                </div>
                                <div class="col-lg-8">
                                    {{ element.serviceDate | date }}
                                    <div>
                                        {{
                                        element.slotTime
                                        }}
                                    </div>
                                </div>
                            </div>

                        </td>
                    </ng-container>

                    <ng-container matColumnDef="Reason">
                        <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                            Status
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span
                                [ngClass]="{'message': element.statusName=='Booked','noShow': element.statusName =='No Show','warn': element.statusName !='Booked'}">
                                {{ element.statusName }}
                            </span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="WaitingTime">
                        <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                            <div class="row">
                                <div class="col-lg-12">Waiting Time</div>

                            </div>
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <!-- <span
                                [ngClass]="{'message': element.statusName=='Booked','noShow': element.statusName =='No Show','warn': element.statusName !='Booked'}">
                                {{ element.statusName }}
                            </span> -->
                            <span>-</span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="VisitCount">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="row">
                                <div class="col-lg-12 text-lg text-white">Visit Count#</div>

                            </div>
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span>
                                {{ element.visitCount }}
                            </span>


                        </td>
                    </ng-container>
                    <ng-container matColumnDef="Billing">
                        <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                            Billing
                        </th>

                        <td mat-cell *matCellDef="let element" (click)="test(row)">
                            {{ element.payment }}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="DuePayment">
                        <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                            DuePayment
                        </th>

                        <td mat-cell *matCellDef="let element" (click)="test(row)">
                            {{ element.duePayment }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="Actions" *ngIf="roleID!='2'">
                        <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                            Actions
                        </th>

                        <td mat-cell *matCellDef="let element">
                            <button mat-icon-button [matMenuTriggerFor]="menu"
                                aria-label="Example icon-button with a menu">
                                <mat-icon>more_vert</mat-icon>
                            </button>
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item *ngIf="roleID=='5' || roleID=='1'|| roleID=='3'"
                                    (click)="onRowClicked(element)">

                                    <mat-icon svgIcon="heroicons_solid:eye"></mat-icon>

                                    <span>View</span>
                                </button>

                                <button mat-menu-item (click)="updateSelect(element);appointmentDrawer.toggle() ">
                                    <mat-icon svgIcon="heroicons_solid:pencil-alt"></mat-icon>
                                    <span>Edit</span>
                                </button>

                                <button mat-menu-item *ngIf="roleID!=='3'" (click)="deleteAppointment(element)">
                                    <mat-icon svgIcon="heroicons_solid:trash"></mat-icon>
                                    <span>Delete</span>
                                </button>
                            </mat-menu>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="Vitals" *ngIf="roleID!='3'">
                        <th mat-header-cell *matHeaderCellDef>
                        </th>
                        <td mat-cell *matCellDef="let row">
                            <button mat-button style="color: #ff4081"
                                (click)="vitalsDrawer.toggle();$event.stopPropagation()">
                                <div *ngIf="row.vitalsID" (click)="setValues(row)">Update Vitals</div>
                                <div *ngIf="!row.vitalsID" (click)="rowData(row)"> Add Vitals</div>
                            </button>
                        </td>
                    </ng-container>

                    <tr mat-header-row class="height" *matHeaderRowDef="displayedColumnsUpcoming; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumnsUpcoming"></tr>  

                      <!-- No Data Row -->
    <!-- <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell text-center" [attr.colspan]="displayedColumnsUpcoming.length">
          No data available
        </td>
      </tr> -->

                </table>
                <!-- <mat-paginator class="scroolbar" *ngIf="upcomings" #Paginator [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="100"
        showFirstLastButtons>
               </mat-paginator> -->
                <div [ngClass]="{'hidediv': upcomings, 'showdic': !upcomings}">

                   

                </div>
            </div>
            <mat-paginator *ngIf="upcomings" #upcomingPaginator [pageSizeOptions]="[5, 10, 25, 100]"
            [pageSize]="100" showFirstLastButtons>
        </mat-paginator>

            <div *ngIf="!upcomings" style="text-align: center;">



                <div class="center-container">
                    <img class="w-16" style="opacity: 0.5;" src="assets/images/logo/imgs1.svg" alt="Fuse logo">

                </div>
                <br>
                <div class="center-container1">
                    <h2 style="color: #146aa6;    margin-top: -59px;">
                        <b>No Upcoming Bookings Found </b>
                    </h2>
                </div>
                <!-- <mat-icon svgIcon="heroicons_solid:x-circle"></mat-icon> -->

            </div>

        </mat-tab>


        <mat-tab label="History">
            <!-- <div class="row">
           
            </div> -->

            <!-- <div class="flex flex-cols">
                <div class="flex flex-cols">

                <mat-form-field *ngIf="Histories" class="col-span-2 search1 custom-background" appearance="outline">
                    <mat-icon matPrefix>perm_identity</mat-icon>
                    <input matInput type="text" [(ngModel)]="searchKey2" (keyup)="doFilter(searchKey2, 3)"
                        placeholder="Search Profile">
                    <button mat-button *ngIf="searchKey2" matSuffix (click)="clearSearch()">
                        <mat-icon>close</mat-icon>
                    </button>
                </mat-form-field>
                </div>
                      
                <div style="margin-bottom: 4px;" class="flex flex-cols mt-1 ">
                    <div class="mr-2">
                        <button *ngIf="Histories" mat-mini-fab color="primary"
                            style="background-color: #ff6f3b !important; box-shadow: none;" (click)="ExportTOExcel()"
                            matTooltip="Export To Excel">
                            <mat-icon svgIcon="mat_outline:sim_card_download"></mat-icon>
                        </button>
                    </div>
                    
                    <div class="mr-2">
                        <button *ngIf="Histories" mat-mini-fab color="primary"
                            style="background-color: #ff6f3b !important; box-shadow: none;" (click)="exportpdf()"
                            matTooltip="Export To PDF">
                            <mat-icon svgIcon="mat_outline:picture_as_pdf"></mat-icon>
                        </button>
                    </div>

                    
                    </div>
                    <mat-form-field class="custom-background" appearance="outline">
                        <mat-select  multiple [(ngModel)]="selectedColumnshistory" (selectionChange)="updateDisplayedColumnshistory()">
                          <mat-select-trigger>
                            <span>Select Columns</span>
                          </mat-select-trigger>
                          <mat-option style="color: #212121; font-weight: 500;" *ngFor="let column of columnDefinitionshistory" [value]="column.def" [disabled]="column.def === 'Actions'">
                            {{ column.displayName }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>

            </div> -->


            <div class="flex justify-between items-center flex-wrap">
                <!-- Left side: Search Profile -->
                <div class="flex items-center">
                  <mat-form-field *ngIf="Histories" class="col-span-2 search1 custom-background" appearance="outline">
                    <mat-icon matPrefix>perm_identity</mat-icon>
                    <input matInput type="text" [(ngModel)]="searchKey2" (keyup)="doFilter(searchKey2, 3)"
                        placeholder="Search Profile">
                    <button mat-button *ngIf="searchKey2" matSuffix (click)="clearSearch()">
                      <mat-icon>close</mat-icon>
                    </button>
                  </mat-form-field>
                </div>
              
                <!-- Right side: Export buttons and Column Select -->
                <div class="flex items-center space-x-2">
                  <button *ngIf="Histories" mat-mini-fab color="primary"
                    style="background-color: #ff6f3b !important; box-shadow: none;" (click)="ExportTOExcel()"
                    matTooltip="Export To Excel">
                    <mat-icon svgIcon="mat_outline:sim_card_download"></mat-icon>
                  </button>
              
                  <button *ngIf="Histories" mat-mini-fab color="primary"
                    style="background-color: #ff6f3b !important; box-shadow: none;" (click)="exportpdf()"
                    matTooltip="Export To PDF">
                    <mat-icon svgIcon="mat_outline:picture_as_pdf"></mat-icon>
                  </button>
              
                  <mat-form-field class="custom-background" appearance="outline">
                    <mat-select multiple [(ngModel)]="selectedColumnshistory" (selectionChange)="updateDisplayedColumnshistory()">
                      <mat-select-trigger>
                        <span>Select Columns</span>
                      </mat-select-trigger>
                      <mat-option style="color: #212121; font-weight: 500;" *ngFor="let column of columnDefinitionshistory"
                        [value]="column.def" [disabled]="column.def === 'Actions'">
                        {{ column.displayName }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
              



            <div class="example-container mat-elevation-z8 h-grid" >
                <table class="table1" id="table1" *ngIf="Histories"  mat-table [dataSource]="historiesBooked" matSort>

                    <ng-container matColumnDef="SL">
                        <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                            ID
                        </th>
                        <td mat-cell *matCellDef="let element">
                            {{ element.appointmentID }}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="Patient">
                        <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                            Patient Details
                        </th>

                        <td mat-cell *matCellDef="let element">
                            <span><b>{{ element.patient | titlecase}}</b></span>
                            ({{ element.gender | slice:0:1}}, {{ element.age }}y)
                            <br />
                            {{ element.mobile }}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="WaitingTime">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="row">
                                <div class="col-lg-12 text-lg text-white">Waiting Time</div>

                            </div>
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span>
                                {{ element.waitingTime }}
                            </span>
                            <span>-</span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="VisitCount">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="row">
                                <div class="col-lg-12 text-lg text-white">Visit Count</div>

                            </div>
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span style="text-align: center;">
                                {{ element.visitCount }}
                            </span>


                        </td>
                    </ng-container>
                    <ng-container matColumnDef="appointmentDate">
                        <th mat-header-cell *matHeaderCellDef>
                            <div class="row">
                                <div class="col-lg-12 text-lg text-white">Date</div>

                            </div>
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span style="text-align: center;">
                                {{ element.serviceDate }}
                            </span>


                        </td>
                    </ng-container>
                    <ng-container matColumnDef="Reason">
                        <th mat-header-cell *matHeaderCellDef class="text-lg text-white">
                            Status
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span
                                [ngClass]="{'message': element.statusName=='Booked','noShow': element.statusName =='No Show','warn': element.statusName !='Booked'}">
                                {{ element.statusName }}
                            </span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="View">
                        <th mat-header-cell *matHeaderCellDef>

                        </th>
                        <td mat-cell *matCellDef="let row">
                            <button mat-button>
                                <div style="color: #146aa6" (click)="onRowClicked(row)"><mat-icon
                                        [matTooltipPosition]="'right'" [matTooltip]="tooltip || 'View'"
                                        svgIcon="heroicons_solid:eye" #file style="color:#146aa6">
                                    </mat-icon></div>
                            </button>

                        </td>
                    </ng-container>
                    <tr mat-header-row class="height" *matHeaderRowDef="displayedColumnsHistory; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumnsHistory;"></tr>
                    <tr class="mat-row" *matNoDataRow>
                        <td class="mat-cell text-center" [attr.colspan]="displayedColumnsHistory.length">
                          No data available
                        </td>
                      </tr>
                </table>
                <div [ngClass]="{'hidediv': Histories, 'showdic': !Histories}">
                  
                </div>
            </div>
            <mat-paginator *ngIf="Histories" #HistoryPaginator [pageSizeOptions]="[5, 10, 25, 100]"
            [pageSize]="100" showFirstLastButtons>
        </mat-paginator>

            <!-- <div *ngIf="!Histories" style="text-align: center;">



                <div class="center-container">
                    <img class="w-16" style="opacity: 0.5;" src="assets/images/logo/imgs1.svg" alt="Fuse logo">

                </div>
                <br>
                <div class="center-container1">
                    <h2 style="color: #146aa6;    margin-top: -59px;">
                        <b>No History Found </b>
                    </h2>
                </div>

            </div> -->
        </mat-tab>


    </mat-tab-group>

</div>

<fuse-drawer class="w-screen min-w-screen sm:w-100 sm:min-w-200 z-999" fixed [mode]="'over'"
    [name]="'appointmentDrawer'" [position]="'right'" #appointmentDrawer>
    <div class="flex flex-col w-full overflow-auto bg-card  ">
        <div class="  flex flex-row items-center px-6 h-20 min-h-20  text-white   Overlays">
            <mat-icon class="icon-size-7 text-current" [svgIcon]="'heroicons_solid:plus'"></mat-icon>
            <div class="ml-3 text-2xl font-semibold tracking-tight">{{actionName}}</div>
            <button class="ml-auto" mat-icon-button (click)="onAppointmentClear();appointmentDrawer.close()">
                <mat-icon class="text-current" [svgIcon]="'heroicons_outline:x'"></mat-icon>
            </button>
        </div>
        <div class="flex flex-col p-6">
            <div class="flex flex-col gt-xs:flex-row">
                <!-- Horizontal stepper -->

                <form class="p-4 bg-card rounded overflow-hidden" [formGroup]="horizontalStepperForm">
                    <mat-horizontal-stepper [linear]="false" #horizontalStepper>
                        <mat-step style="background-color: #146aa6; color: white;" [formGroupName]="'step1'"
                            [stepControl]="horizontalStepperForm.get('step1')" #horizontalStepperStep1>
                            <ng-template matStepLabel>Appointment Details</ng-template>
                            <div class="row">
                                <mat-form-field floatLabel="never" class="col-lg-12"
                                    *ngIf="actionName=='New Appointment'">

                                    <input type="text" [(ngModel)]="searchKey3" placeholder="Search Patient  Profile"
                                        aria-label="Number" matInput [formControl]="myControl" [matAutocomplete]="auto">
                                    <mat-icon matPrefix>perm_identity</mat-icon>
                                    <button mat-button matSuffix mat-icon-button aria-label="clear" *ngIf="searchKey3"
                                        (click)="onSearchClear()">
                                        <mat-icon>close</mat-icon>
                                    </button>
                                    <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn"
                                        (optionSelected)='applyFilter($event.option)'>
                                        <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                                            <mat-icon>account_circle</mat-icon> {{option.mobile}} ( {{option.patient}} )
                                        </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>
                                <!-- <mat-form-field floatLabel="never" class="col-lg-12"
                                *ngIf="actionName=='New Appointment'">

                                <input type="text"  [(ngModel)]="searchKey3" placeholder="Search Patient Profile"
                                    aria-label="Number" (keyup)="applysearch()"   matInput [formControl]="myControl" [matAutocomplete]="auto">
                                <mat-icon matPrefix>perm_identity</mat-icon>
                                <button mat-button matSuffix mat-icon-button aria-label="clear" *ngIf="searchKey3"
                                    (click)="onSearchClear()">
                                    <mat-icon>close</mat-icon>
                                </button>
                                <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn"
                                    (optionSelected)='applyFilter($event.option)'>
                                    <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                                        <mat-icon>account_circle</mat-icon> {{option.mobile}} ( {{option.patient}} )
                                    </mat-option>
                                </mat-autocomplete>
                            </mat-form-field> -->
                            </div>

                            <div class="row" style="padding-top: 15px;">
                                <mat-form-field class="col-lg-4" appearance="outline">
                                    <mat-label>Select Date</mat-label>
                                    <input matInput [matDatepicker]="picker" [formControlName]="'appDate'"
                                        [min]="yesterday" [readonly]="isDuePay" [disabled]="roleID==3||roleID==2" required
                                        (dateChange)="onDateChanged($event)" />
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>
                                </mat-form-field>
                                <!-- <mat-form-field>
                                    <input matInput [matDatepicker]="picker" placeholder="Choose a date">
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-datepicker #picker [min]="today"></mat-datepicker>
                                  </mat-form-field> -->
                                <mat-form-field class="col-lg-4" appearance="outline">
                                    <mat-label>Select Doctor</mat-label>
                                    <mat-select [formControlName]="'docName'"
                                        (selectionChange)="getSlotsWithDocID($event.value)" required
                                        [disabled]="isDuePay||roleID==3||roleID==2">
                                        <mat-option *ngFor="let doc of doctors" [value]="doc.doctorID">
                                            {{ doc.doctor }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <mat-form-field class="col-lg-4" appearance="outline">
                                    <mat-label>Select Time</mat-label>
                                    <mat-select [formControlName]="'slot'" required [disabled]="isDuePay||roleID==3||roleID==2"
                                        (selectionChange)="getTimeChange($event.value)">
                                        <mat-option *ngFor="let item of slotsArr" [value]="item">
                                            {{ item.slot }}
                                        </mat-option>
                                    </mat-select>

                                </mat-form-field>

                            </div>
                            <div class="row">
                                <mat-form-field class="col-lg-4" appearance="outline">
                                    <mat-label>Full Name</mat-label>
                                    <input matInput [formControlName]="'firstName'" pattern="[a-zA-Z][a-zA-Z .]+"
                                        required [readonly]="isDuePay" [(ngModel)]="fName" />
                                </mat-form-field>

                                <!-- <mat-form-field class="col-lg-4" appearance="outline">
                                    <mat-label>Last Name</mat-label>
                                    <input matInput [formControlName]="'lastName'" [readonly]="isDuePay" />
                                </mat-form-field> -->
                                <mat-form-field class="col-lg-4" appearance="outline">
                                    <mat-label>Mobile Number </mat-label>
                                    <!-- (keyup)="searchPatient($event.target.value)" -->
                                    <input matInput [formControlName]="'mobNum'" pattern="[0-9]{10}"
                                        [(ngModel)]="mobNum" required [readonly]="isDuePay" [disabled]="roleID==3"
                                        oninput="this.value = this.value.replace(/[^0-9]/g, '');" />


                                </mat-form-field>
                                <mat-form-field class="col-lg-4" appearance="outline">
                                    <mat-label>Age</mat-label>
                                    <input matInput [formControlName]="'age'" required [readonly]="isDuePay"
                                        [(ngModel)]="age" />
                                </mat-form-field>
                            </div>
                            <div class="row">
                                <!-- <mat-radio-group class="col-lg-4" [color]="'primary'" [formControlName]="'gender'" [(ngModel)]="Genderselected"
                                    required [disabled]="isDuePay">
                                    <mat-radio-button *ngFor="let item of genders" style="font-size: 11px"
                                        [value]="item.genderID">
                                        <span>
                                            {{item.gender}}
                                        </span>
                                    </mat-radio-button>
                                </mat-radio-group> -->

                                <mat-form-field class="col-lg-4" appearance="outline">
                                    <mat-label>Gender</mat-label>
                                    <mat-select [formControlName]="'gender'" [(ngModel)]="Genderselected" required
                                        [disabled]="isDuePay">
                                        <mat-option *ngFor="let item of genders" [value]="item.genderID">
                                            {{ item.gender }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>



                                <!-- <mat-form-field class="col-lg-4" appearance="outline">
                                    <mat-label>Select Status</mat-label>
                                    <mat-select [formControlName]="'status'" required [disabled]="isDuePay">
                                        <mat-option *ngFor="let item of status" [value]="item.statusID">
                                            {{ item.statusName }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field> -->
                            </div>

                            <div class="flex justify-end" *ngIf="action != 'Update Existing Appointment'">
                                <!-- <button class="px-8" mat-flat-button [color]="'primary'" [disabled]="isNoSlot ||
                                        (horizontalStepperStep1.stepControl
                                            .pristine ||
                                        horizontalStepperStep1.stepControl
                                            .invalid)
                                    " type="button" matStepperNext>
                                    Next
                                </button> -->
                                <button type="button" [ngClass]="(horizontalStepperStep1.stepControl
                                .invalid) ? 'btnnext' : 'btnnext1'" [disabled]="isNoSlot ||
                                (horizontalStepperStep1.stepControl
                                    .pristine ||
                                horizontalStepperStep1.stepControl
                                    .invalid)" matStepperNext>
                                    Next
                                </button>

                            </div>
                            <div class="flex justify-end" *ngIf="action == 'Update Existing Appointment'">
                                <button class="px-8" mat-flat-button [color]="'primary'" [disabled]="nextDisabled                                         
                                    " type="button" matStepperNext>
                                    Next
                                </button>
                                <!-- <button  type="button" class=" btnadd1"  [disabled]="nextDisabled "  >
                                   Next
                                   </button> -->
                            </div>

                        </mat-step>



                        <mat-step [formGroupName]="'step2'" [stepControl]="horizontalStepperForm.get('step2')"
                            #horizontalStepperStep2>
                            <ng-template matStepLabel>Payment</ng-template>

                            <div class="row">
                                <mat-form-field class="col-lg-12" appearance="outline">
                                    <mat-label>Select Service</mat-label>
                                    <mat-select (selectionChange)="EnableModeprice($event)" [formControlName]="'serviceName'"
                                        required [disabled]="isDuePay||roleID==3||roleID==2||roleID==5">
                                        <mat-option *ngFor="let item of services" [value]="item.serviceID">
                                            {{ item.serviceName }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                      
                            <div class="row" *ngIf="isPriceTag">
                                <mat-form-field class="col-lg-3" appearance="outline">
                                    <mat-label>Price</mat-label>
                                    <input matInput [(ngModel)]="price" [formControlName]="'price'" (input)="applyNetPrice($event)"
                                           required readonly disabled>
                                </mat-form-field>
                                
                                

                                <mat-form-field class="col-lg-3" appearance="outline">
                                    <mat-label>Mode Of Payment</mat-label>
                                    <mat-select [formControlName]="'modeOfPayment'" [(ngModel)]="selectpayment" [disabled]="ModePrice||roleID==3||roleID==2||roleID==5">
                                        <mat-option *ngFor="let item of Mode " [value]="item.ID">
                                            {{ item.label }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <mat-form-field class="col-lg-3" appearance="outline" >
                                    <mat-label>Discount in %</mat-label>
                                    <mat-select [formControlName]="'discount'" [(ngModel)]="selecteddiscount" (selectionChange)="applyNetPrice1()"
                                        [disabled]="isDuePay||roleID==3||roleID==2||roleID==5">
                                        <mat-option *ngFor="let item of discounts" [value]="item.discountID">
                                            {{ item.discount }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <mat-form-field class="col-lg-3" appearance="outline">
                                    <mat-label>Amount Paid</mat-label>
                                    <input matInput [formControlName]="'amountPaid'" readonly required />
                                  </mat-form-field>
                                  
                            </div>

                            <!-- <div class="row" *ngIf="isPriceTag &&roleID==1">
                                <mat-form-field class="col-lg-4" appearance="outline">
                                    <mat-label>Net Price</mat-label>
                                    <input matInput [formControlName]="'netPrice'" [readonly]="true" />
                                </mat-form-field>

                            </div> -->
                            <div class="row" *ngIf="isDuePay&&roleID==1">
                                <mat-form-field class="col-lg-4" appearance="outline">
                                    <mat-label>Amount to Pay</mat-label>
                                    <input matInput [formControlName]="'duePayment'" />
                                </mat-form-field>

                            </div>

                            <div class="flex justify-end" *ngIf="isPriceTag">
                                <button class="px-8 mr-2" mat-flat-button [color]="'accent'" type="button"
                                    matStepperPrevious>
                                    Back
                                </button>
                                <!-- <button class="px-8" mat-flat-button [color]="'primary'"
                                    (click)="addRegisterPatientAppointment(horizontalStepperForm.value);appointmentDrawer.close();ConfirmDialog.toggle()"
                                    [disabled]="

                                        horizontalStepperStep2.stepControl
                                            .invalid
                                    " type="button" matStepperNext>
                                    {{appointmentButton}}
                                </button> -->
                                <button type="button"
                                (click)="addRegisterPatientAppointment(horizontalStepperForm.value); ConfirmDialog.toggle();"
                                [ngClass]="horizontalStepperStep2.stepControl.invalid ? 'btnnext' : 'btnnext1'"
                                [disabled]="horizontalStepperStep2.stepControl.invalid" matStepperNext>
                                <span *ngIf="!loading">{{ appointmentButton }}</span>
                                <mat-progress-spinner *ngIf="loading" [diameter]="20" [mode]="'indeterminate'" style="color: white;"></mat-progress-spinner>
                            </button>
                            

  
                            </div>
                            <div class="flex justify-end" *ngIf="!isPriceTag">
                                <button class="px-8 mr-2" mat-flat-button [color]="'accent'" type="button"
                                    matStepperPrevious>
                                    Back
                                </button>
                                <button class="px-8" mat-flat-button [color]="'primary'"
                                    (click)="addRegisterPatientAppointment(horizontalStepperForm.value);ConfirmDialog.toggle()"
                                    type="button" matStepperNext>
                                    {{appointmentButton}}
                                </button>
                            </div>
                        </mat-step>
                    </mat-horizontal-stepper>
                </form>
            </div>
        </div>
    </div>
</fuse-drawer>


<!--==========================Vitals======================================-->


<fuse-drawer class="w-screen min-w-screen sm:w-100 sm:min-w-200 z-999" fixed [mode]="'over'" [name]="'vitalsDrawer'"
    [position]="'right'" #vitalsDrawer>
    <div class="flex flex-col w-full overflow-auto bg-card">
        <div class="  flex flex-row items-center  h-10 min-h-10  text-white" style="background-color: #333;">
            <!-- <mat-icon class="icon-size-7 text-current" [svgIcon]="'heroicons_solid:plus'"></mat-icon> -->
            <div class="ml-3 text-2xl font-semibold tracking-tight track_font">
                <!-- Add Vitals : Srikanth Godugu (M, Age.28)-->
                Add Vitals : {{patientName}}
            </div>
            <button class="ml-auto" mat-icon-button (click)="vitalsDrawer.close()">
                <mat-icon class="text-current" [svgIcon]="'heroicons_outline:x'"></mat-icon>
            </button>
        </div>


        <div class="flex flex-col p-6">
            <div class="flex flex-col gt-xs:flex-row">
                <div class="tabbable-panel">
                    <div class="tabbable-line">
                        <ul class="nav nav-tabs ">
                            <li class="active">
                                <a href="#tab_default_1" data-toggle="tab">
                                    Vitals
                                </a>
                            </li>
                            <li>
                                <a href="http//google.co.in" target="_blank" data-toggle="tab">
                                    Lab Report
                                </a>
                            </li>

                        </ul>
                        <div class="tab-content mb-5">
                            <div class="tab-pane active" id="tab_default_1">
                                <div class="panel-group" id="accordionGroupClosed" role="tablist"
                                    aria-multiselectable="true">
                                    <div class="panel panel-default">
                                        <div class="panel-heading" role="tab" id="headingOne">
                                            <h4 class="panel-title">
                                                <a class="collapsed" role="button" data-toggle="collapse"
                                                    data-parent="#accordionGroupClosed" href="#collapseCloseOne"
                                                    aria-expanded="false" aria-controls="collapseCloseOne">
                                                    Add Vitals
                                                </a>
                                            </h4>
                                        </div>
                                        <div id="collapseCloseOne" class="panel-collapse collapse" role="tabpanel"
                                            aria-labelledby="headingOne">
                                            <div class="panel-body">
                                                <fieldset class="scheduler-border" [formGroup]="vitalsForm">
                                                    <div class="row">
                                                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 text_box">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Weight in KG</mat-label>
                                                                <input style="color: black;" matInput
                                                                    [formControlName]="'weight'" />
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 text_box">
                                                            <!-- <mat-form-field appearance="outline" >
                                                                <mat-label>Blood Group</mat-label>
                                                                <input matInput [formControlName]="'bloodGroup'" />
                                                            </mat-form-field> -->
                                                            <mat-form-field
                                                                class="col-lg-12 col-md-12 col-sm-12 col-xs-12"
                                                                appearance="outline">
                                                                <mat-label>Blood Group</mat-label>
                                                                <mat-select style="color: black;"
                                                                    [formControlName]="'bloodGroup'">
                                                                    <mat-option *ngFor="let item of BloodGroup"
                                                                        [value]="item.ID">
                                                                        {{ item.ID }}
                                                                    </mat-option>
                                                                </mat-select>
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Temperature in F</mat-label>
                                                                <input style="color: black;" matInput
                                                                    [formControlName]="'temp'" />
                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Serum Creatinine</mat-label>
                                                                <input style="color: black;" matInput
                                                                    [formControlName]="'serumCreatinine'" />
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Blood Pressure</mat-label>
                                                                <input style="color: black;" matInput
                                                                    [formControlName]="'bloodPressure'" />

                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Pulse</mat-label>
                                                                <input style="color: black;" matInput
                                                                    [formControlName]="'pulse'" />
                                                            </mat-form-field>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>SpO2 %</mat-label>
                                                                <input style="color: black;" matInput
                                                                    [formControlName]="'SpO2'" />
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>BMI</mat-label>
                                                                <input style="color: black;" matInput
                                                                    [formControlName]="'BMI'" />
                                                            </mat-form-field>
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                            <mat-form-field appearance="outline">
                                                                <mat-label>Advice</mat-label>
                                                                <input style="color: black;" matInput
                                                                    [formControlName]="'advice'" />
                                                            </mat-form-field>
                                                        </div>


                                                    </div>
                                                </fieldset>


                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading" role="tab" id="headingTwo">
                                            <h4 class="panel-title">
                                                <a class="collapsed" role="button" data-toggle="collapse"
                                                    data-parent="#accordionGroupClosed" href="#collapseCloseTwo"
                                                    aria-expanded="false" aria-controls="collapseTwo">
                                                    Observation
                                                </a>
                                            </h4>
                                        </div>
                                        <div id="collapseCloseTwo" class="panel-collapse collapse" role="tabpanel"
                                            aria-labelledby="headingTwo">
                                            <div class="panel-body">
                                                <fieldset class="scheduler-border" [formGroup]="vitalsForm">
                                                    <!---    <div class="row">
                                                        <mat-form-field class="col-lg-12 col-md-12 col-sm-12 col-xs-12"
                                                            appearance="outline">
                                                            <mat-label>Select Visit Reason</mat-label>
                                                            <mat-select [formControlName]="'visitReason'">
                                                                <mat-option *ngFor="let item of visitReason"
                                                                    [value]="item.visitReasonID">
                                                                    {{ item.reason }}
                                                                </mat-option>
                                                            </mat-select>
                                                        </mat-form-field>

                                                    </div>-->
                                                    <div class="row">
                                                        <!-- <mat-form-field
                                                            class="example-chip-list col-lg-12 col-md-12 col-sm-12 col-xs-12"
                                                            appearance="fill">
                                                            <mat-label>
                                                                Complaints (Type and select or press enter to
                                                                add...)
                                                            </mat-label>
                                                            <mat-chip-list #chipList aria-label="Fruit selection">
                                                                <mat-chip *ngFor="let fruit of fruits"
                                                                    [selectable]="selectable" [removable]="removable"
                                                                    (removed)="remove(fruit)">
                                                                    {{fruit}}
                                                                    <button matChipRemove *ngIf="removable">
                                                                        <mat-icon>cancel</mat-icon>
                                                                    </button>
                                                                </mat-chip>
                                                                <input style="color: black;" #fruitInput
                                                                    [formControl]="fruitCtrl" [matAutocomplete]="auto"
                                                                    [matChipInputFor]="chipList"
                                                                    [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                                                    (matChipInputTokenEnd)="add($event)">
                                                            </mat-chip-list>
                                                            <mat-autocomplete #auto="matAutocomplete"
                                                                (optionSelected)="selected($event)">
                                                                <mat-option *ngFor="let fruit of filteredFruits | async"
                                                                    [value]="fruit.complaintName">
                                                                    {{fruit.complaintName}}
                                                                </mat-option>
                                                            </mat-autocomplete>
                                                        </mat-form-field> -->

                                                        <mat-form-field
                                                                class="example-chip-list col-lg-12 col-md-12 col-sm-12 col-xs-12"
                                                                 appearance="outline">
                                                                <mat-label>
                                                                    Complaints (Type and select or press enter to
                                                                    add...)
                                                                </mat-label>
                                                                <mat-chip-list #chipList aria-label="Fruit selection">
                                                                    <mat-chip class="matchipheight" *ngFor="let fruit of fruits"
                                                                        [selectable]="selectable" [removable]="removable"
                                                                        (removed)="remove(fruit)">
                                                                        {{fruit}}
                                                                        <button class="cancelbtnheaight" matChipRemove *ngIf="removable">
                                                                            <mat-icon>cancel</mat-icon>
                                                                        </button>
                                                                    </mat-chip>
                                                                    <input class="alignthetext" #fruitInput [formControl]="fruitCtrl"
                                                                        [matAutocomplete]="auto" [matChipInputFor]="chipList"
                                                                        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                                                        (matChipInputTokenEnd)="add($event)">
                                                                </mat-chip-list>
                                                                <mat-autocomplete #auto="matAutocomplete"
                                                                    (optionSelected)="selected($event)">
                                                                    <mat-option *ngFor="let fruit of filteredFruits | async"
                                                                        [value]="fruit.complaintName">
                                                                        {{fruit.complaintName}}
                                                                    </mat-option>
                                                                </mat-autocomplete>
                                                            </mat-form-field>

                                                    </div>







                                                </fieldset>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default">
                                        <div class="panel-heading" role="tab" id="headingThree">
                                            <h4 class="panel-title">
                                                <a class="collapsed" role="button" data-toggle="collapse"
                                                    data-parent="#accordionGroupClosed" href="#collapseCloseThree"
                                                    aria-expanded="false" aria-controls="collapseThree">
                                                    Attachments
                                                </a>
                                            </h4>
                                        </div>
                                        <div id="collapseCloseThree" class="panel-collapse collapse" role="tabpanel"
                                            aria-labelledby="headingThree">
                                            <div class="panel-body">
                                                <!-- <div  class="drop-area"
                                            (dragover)="onDragOver($event)"
                                            (dragleave)="onDragLeave($event)"
                                            (drop)="onDrop($event)"(click)="fileInput.click()" style="width: 50%; height: 100%; padding-top: 24px; padding-bottom: 24px; background: white;  justify-content: center; align-items: center; display: inline-flex">
                                              <div style="flex-direction: column; justify-content: center; align-items: center; gap: 8px; display: inline-flex">
                                                <div >
                                                             
                                                    <span class="flex justify-center font-medium text-md text-primary-500 w-32 overflow-hidden"></span>
                                                    <mat-icon class="icon-size-14" >perm_media</mat-icon>
                                                    <button class=" px-2 bg-gray-300"(click)="openFileInput()" >Upload Logo</button>
                                                    <div>(or)</div>
                                                    <div>drag & drop file(s) here</div>
                                                   
                                              </div>
                                        
                                             
                                              </div>
                                          </div> -->

                                                <div class="drop-area" (dragover)="onDragOver($event)"
                                                    (dragleave)="onDragLeave($event)" (drop)="onDrop($event)"
                                                    style="width: 50%; height: 100%; padding-top: 24px; padding-bottom: 24px; background: white; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                                                    <div
                                                        style="display: flex; flex-direction: column; gap: 8px; align-items: center; text-align: center;">
                                                        <mat-icon class="icon-size-14">perm_media</mat-icon>
                                                        <button class="px-2" style="color: #ff6f3b; background-color: #212121; border-radius: 2px;"
                                                            (click)="openFileInput()">Upload File</button>
                                                        <div>(or)</div>
                                                        <div>drag & drop file(s) here</div>
                                                    </div>
                                                </div>


                                                <input #fileInput type="file" accept=".jpg, .png, .jpeg, .jfif"
                                                    formControlName="Image" (change)="detectFiles1($event)"
                                                    style="display: none" multiple />


                                                <fieldset class="scheduler-border" [formGroup]="vitalsForm">
                                                    <!-- <div class="row">
                                                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                        <label for="colFormLabelSm0"
                                                            class="col-form-label ">S No </label>
                                                    </div>
                                                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                        <label for="colFormLabelSm1" class="col-form-label ">
                                                             File Name
                                                        </label>
                                                    </div>
                                                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                        <label for="colFormLabelSm1" class="col-form-label ">
                                                            Actions
                                                       </label>
                                                    </div>

                                                </div> -->

                                                    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8"
                                                        *ngIf="vitalsForm.get('items')['controls'].length > 0">

                                                        <ng-container matColumnDef="slno">
                                                            <th mat-header-cell *matHeaderCellDef
                                                                class="text-lg text-white"> S No </th>
                                                            <!-- <td mat-cell *matCellDef="let element; let i = index"> {{ i + 1 }} </td> -->
                                                        </ng-container>
                                                        <ng-container matColumnDef="name">
                                                            <th mat-header-cell *matHeaderCellDef
                                                                class="text-lg text-white"> File Name </th>
                                                            <!-- <td mat-cell *matCellDef="let element"> {{ element.fileName }} </td> -->
                                                        </ng-container>

                                                        <ng-container matColumnDef="actions">
                                                            <th mat-header-cell *matHeaderCellDef
                                                                class="text-lg text-white"> Actions </th>
                                                            <!-- <td mat-cell *matCellDef="let element; let i = index">
                                                        <button type="button" (click)="DeleteItem(i)">
                                                          <mat-icon svgIcon="heroicons_solid:trash" style="color: red;"></mat-icon>
                                                        </button>
                                                      </td> -->
                                                        </ng-container>

                                                        <tr mat-header-row class="height" *matHeaderRowDef="displayedColumns1"></tr>
                                                        <tr mat-row *matRowDef="let row; columns: displayedColumns1;">
                                                        </tr>
                                                    </table>

                                                    <!-- <div class="row">
                                                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                        <label for="colFormLabelSm0"
                                                            class="col-form-label ">Document Name</label>
                                                    </div>
                                                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                        <label for="colFormLabelSm1" class="col-form-label ">
                                                            Upload File
                                                        </label>
                                                    </div>
                                                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                        <p style="text-align: right; margin-top: -8px;">
                                                            <button type="button"
                                                                class="btn btn-primary btn-sm mr-1"
                                                                (click)="addItem()">
                                                                + Add
                                                            </button>

                                                        </p>
                                                    </div>

                                                </div> -->




                                                    <div formArrayName="items"
                                                        *ngFor="let item of vitalsForm.get('items')['controls']; let i = index;">
                                                        <ng-container [formGroupName]="i">
                                                            <div class="row"
                                                                *ngIf="vitalsForm.get('items')['controls'].length > 0">
                                                                <div
                                                                    class="col-lg-3 col-md-4 col-sm-12 col-xs-12 pl-12 pt-2">


                                                                    <label for="colFormLabelSm1"
                                                                        class="col-form-label ">
                                                                        {{i+1}}
                                                                    </label>
                                                                </div>

                                                                <!-- <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                                                                <div>
                                                                    <input style="color: black;" autocomplete="off"
                                                                        class="form-control py-2 border-right-0 border"
                                                                        formControlName="fileName" readonly
                                                                        style="height: 57px !important;">
                                                                </div>
                                                            </div> -->
                                                                <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                                                                    <div class=" py-2 "
                                                                        style="height: 57px !important; color: black;">
                                                                        {{
                                                                        vitalsForm.get('items')['controls'][i].get('fileName').value
                                                                        }}
                                                                    </div>
                                                                </div>





                                                                <div class="col-lg-1 col-md-1 col-sm-12 col-xs-12 pl-26"
                                                                    style="padding-top: 8px; ">

                                                                    <button type="button">
                                                                        <mat-icon svgIcon="heroicons_solid:trash"
                                                                            (click)="DeleteItem(i)" style="color:red;">
                                                                        </mat-icon>
                                                                    </button>
                                                                </div>


                                                            </div>
                                                            <br />
                                                        </ng-container>

                                                    </div>
                                                    <!-- <div formArrayName="items"
                                                    *ngFor="let item of vitalsForm.get('items')['controls']; let i = index;">
                                                    <ng-container [formGroupName]="i">
                                                        <div class="row">
                                                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                               
                                                                <mat-form-field appearance="outline">
                                                                   
                                                                    <input style="color: black;" matInput [formControlName]="'docType'" />
                                                                </mat-form-field>
                                                            </div>


                                                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                                <div class="header-icon" (click)="file.click()"
                                                                    style=" margin-left: -19px; width: 100%; ">
                                                                    <button type="button" class="btn btn-primary" 
                                                                        style="width: 100%; height: 57px !important; border-radius:5px;">

                                                                        <span style="font-size:20px;">📎</span> File
                                                                        Upload {{ i + 1 }}
                                                                    </button>
                                                                </div>
                                                                <span style="display:none">
                                                                    <input type="file" #file
                                                                        (change)="detectFiles($event,item)"
                                                                        class="form-control"
                                                                        formControlName="Image">
                                                                </span>
                                                               
                                                            </div>


                                                            <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                                                                <div>
                                                                    <input style="color: black;" autocomplete="off"
                                                                        class="form-control py-2 border-right-0 border"
                                                                        formControlName="fileName" readonly
                                                                        style="height: 57px !important;">
                                                                </div>
                                                            </div>




                                                            <div class="col-lg-1 col-md-1 col-sm-12 col-xs-12"
                                                                style="padding-top: 16px; ">

                                                                <button type="button">
                                                                    <mat-icon svgIcon="heroicons_solid:trash"
                                                                        (click)="DeleteItem(i)" style="color:red;">
                                                                    </mat-icon>
                                                                </button>
                                                            </div>


                                                        </div>
                                                        <br />
                                                    </ng-container>
                                                  
                                                </div> -->


                                                </fieldset>

                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex justify-end">
                                    <!-- <button type="button" style="cursor: pointer;background-color: #ff7633;color: white;"
                                        [ngClass]="(vitalsForm.invalid) ? 'btnsub' : 'btnsub1'" (click)="
                                    addUpdateVitals(vitalsForm.value);vitalsDrawer.close();"
                                        >
                                        Submit
                                    </button> -->
                                    <button type="button" 
                                    style="cursor: pointer; background-color: #ff6f3b; color: white;"
                                    [ngClass]="(vitalsForm.invalid) ? 'btnsub' : 'btnsub1'" 
                                    [disabled]="loading"
                                    (click)="addUpdateVitals(vitalsForm.value)">
                                <span *ngIf="!loading">Submit</span>
                                <mat-progress-spinner *ngIf="loading" [diameter]="20" [mode]="'indeterminate'" style="color: blue;"></mat-progress-spinner>
                            </button>
                                    
                                </div>

                            </div>
                            <div class="tab-pane" id="tab_default_2">
                                <div>Test</div>

                            </div>

                            <div class="flex justify-end">

                            </div>
                        </div>
                    </div>
                </div>



            </div>
        </div>
    </div>
</fuse-drawer>



<div class="flex w-full" *ngIf="(Screen==2)">
    <div class="flex w-full">
        <div class="col-lg-12 col-sm-12 col-md-12">

            <div class="flex flex-cols mt-2 rounded-2xl border-2 bg-card  justify-between">
            <div style="width: 100%;">
                <!-- <div class="col-lg-1">
                </div> -->
                <div class="col-lg-1" style="cursor: pointer;margin-top: 20px;" (click)="appoinmentLink()">
                    <!-- <mat-icon class="icon-size-14 text-current"> arrow_left</mat-icon> -->
                    <!-- <button type="button" class="btn btn-primary btn-sm mr-1"  style="width: 100%;  border-radius:5px;"
                                                                (click)="appoinmentLink()">
                                                                Back
                                                            </button> -->
                    <!-- <button class="px-6" mat-flat-button [color]="'primary'"                                         
                                                             type="button" >
                                                            Back
                                                        </button> -->
                </div>
                <!-- <div class="col-lg-5">
                    <label style="font-size: x-large;"><b>{{detailData.patient}}</b></label><br>
                    <mat-icon class="icon-size-3 text-current"> local_phone</mat-icon> {{detailData.mobile}} <mat-icon
                        class="icon-size-3 text-current"> contacts</mat-icon> {{detailData.gender}},{{detailData.age}}
                    yrs
                </div> -->
                <!-- <div class="col-lg-5 align-items-center">
                   <span> <mat-icon class="text-current" svgIcon="heroicons_solid:user-circle"></mat-icon> </span>
                    <label style="font-size: x-large;"><b>{{detailData.patient}}</b>  </label><span> ({{ detailData.gender | slice:0:1}}, {{ detailData.age }}y)</span><br>
                    <mat-icon class="icon-size-3 text-current" svgIcon="feather:phone-call"></mat-icon> {{detailData.mobile}} 
                </div> -->
                
                <div class="flex flex-col sm:flex-row md:flex-col flex-auto justify-between userstyle">

                    <div style="display: flex; align-items: center;">
                        <span style="cursor: pointer; padding-right: 10px; display: flex; align-items: center;" 
                            (click)="goBack()">
                            <mat-icon class="text-current" svgIcon="heroicons_outline:arrow-left" 
                                    style="font-size: 32px; transition: transform 0.2s ease;">
                            </mat-icon>
                        </span>
                        <span > <mat-icon class="text-current" svgIcon="heroicons_outline:user-circle"></mat-icon>
                        </span>
                        <label class="text-2xl p-2"><b>{{detailData.patientName}}</b> </label>
                        <span> ({{ detailData.gender |
                            slice:0:1}}, {{ detailData.age }}y)
                        </span><br>
                    </div>
                    <div style="display: flex; align-items: center; margin-bottom: 1.5%;" class="ml-9">
                        <!-- <mat-icon class="mr-1 text-current" svgIcon="heroicons_solid:phone"></mat-icon> -->
                        <img src="assets/images/logo/phone.png" class="image" />
                        <a [attr.href]="'tel:' + detailData.mobile">{{detailData.mobile}}</a>
                    </div>

                </div>
            
            
            </div>

            <div>
            <div  style="text-align: right;padding-top:15px; margin-bottom: 10px;" *ngIf="roleID=='3'">
                <span class="doctorsize">
                <label  style="font-size: large;color: darkgray;"><b> </b></label><label class="login_name"><b>
                        Front Desk</b></label></span>
            </div>
            <div  style="text-align: right;padding-top:15px; margin-bottom: 10px;" *ngIf="roleID=='2'">
                <span class="doctorsize">
                <label  style="font-size: large;color: darkgray;"><b></b></label><label class="login_name"><b>
                        With Doctor</b></label></span>
            </div>
            <!-- <div  style="text-align: right;padding-top:15px" *ngIf="roleID=='5'">
                <label style="font-size: large;color: darkgray;"><b>Status : </b></label><label class="login_name"><b>
                        With Jr.Doctor</b></label>
            </div> -->
            <div  style="text-align: right;padding-top:15px; margin-bottom: 10px;" *ngIf="roleID=='5'">
                <span class="doctorsize">
                <label  style="font-size: large;color: darkgray;"><b></b></label><label class="login_name"><b>
                    With Jr.Doctor</b></label></span>
            </div>
             </div> 
            </div>


            <div class=" bg-card border-2  rounded-2xl mt-2 col-lg-12">

                <mat-tab-group>

                    <mat-tab label="Today" *ngIf="roleID=='2'">
                        <div class="row d-flex " class="panelLabel ">
                            <mat-drawer-container class=" aligns">
                                <!-- Drawer -->
                                <mat-drawer class=" dark:bg-gray-900" [autoFocus]="false" [mode]="drawerMode" [opened]="drawerOpened"
                                    #drawer>
                                    <!-- Header -->
                                    <!-- Panel links -->
                                    <div class="flex flex-col divide-y border">
                                        <ng-container *ngFor="let panel of panels; trackBy: trackByFn">
                                            <div class="flex px-8 paddingthepanels cursor-pointer" [ngClass]="{'hover:bg-gray-100 dark:hover:bg-hover': !selectedPanel || selectedPanel !== panel.id,
                                                            'bg-primary-50 dark:bg-hover': selectedPanel && selectedPanel === panel.id}"
                                                (click)="goToPanel(panel.id)">
                                                <!-- <mat-icon
                                                    [ngClass]="{'text-hint': !selectedPanel || selectedPanel !== panel.id,
                                                                'text-primary dark:text-primary-500': selectedPanel && selectedPanel === panel.id}"
                                                    [svgIcon]="panel.icon"></mat-icon> -->
                                                <div class="ml-3">
                                                    <div class="font-semibold leading-6"
                                                        [ngClass]="{'text-primary dark:text-primary-500': selectedPanel && selectedPanel === panel.id}">
                                                        {{panel.title}}
                                                    </div>
                                                    <div class="mt-0.5 text-secondary">
                                                        {{panel.description}}
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </div>
                                </mat-drawer>
                                <!-- Drawer content -->
                                <mat-drawer-content class="flex flex-col">
                                    <!-- Main -->
                                    <div class="flex-auto px-4 p-2 bg-card">
                                        <!-- Panel header -->
                                        <div class="flex items-center">
                                            <!-- Drawer toggle -->
                                            <button class="lg:hidden -ml-2" mat-icon-button (click)="drawer.toggle()">
                                                <mat-icon [svgIcon]="'heroicons_outline:menu'"></mat-icon>
                                            </button>
                                            <!-- Panel title -->
                                        </div>
                        
                                        <!-- Load settings panel -->
                                        <div>
                                            <ng-container [ngSwitch]="selectedPanel">
                                                <!-- Account -->
                                                <ng-container *ngSwitchCase="'Vitals'">
                                                    <fieldset class="scheduler-border" [formGroup]="vitalsForm">
                                                        <div class="row">
                                                            <div class="col-lg-3 col-md-4 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline">
                                                                    <mat-label>Weight in KG</mat-label>
                                                                    <input matInput [formControlName]="'weight'" />
                                                                </mat-form-field>
                                                            </div>
                                                            <div class="col-lg-3 col-md-4 col-sm-12 col-xs-12">
                                                                <!-- <mat-form-field appearance="outline">
                                                                    <mat-label>Blood Group</mat-label>
                                                                    <input matInput [formControlName]="'bloodGroup'" />
                                                                </mat-form-field> -->
                                                                <mat-form-field appearance="outline">
                                                                    <mat-label>Blood Group</mat-label>
                                                                    <mat-select [formControlName]="'bloodGroup'">
                                                                        <mat-option *ngFor="let item of BloodGroup"
                                                                            [value]="item.ID">
                                                                            {{ item.ID }}
                                                                        </mat-option>
                                                                    </mat-select>
                                                                </mat-form-field>
                                                            </div>
                                                            <div class="col-lg-3 col-md-4 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline">
                                                                    <mat-label>Temperature in F</mat-label>
                                                                    <input matInput [formControlName]="'temp'" />
                                                                </mat-form-field>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-lg-3 col-md-4 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline">
                                                                    <mat-label>Serum Creatinine</mat-label>
                                                                    <input matInput [formControlName]="'serumCreatinine'" />
                                                                </mat-form-field>
                                                            </div>
                                                            <div class="col-lg-3 col-md-4 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline">
                                                                    <mat-label>Blood Pressure</mat-label>
                                                                    <input matInput [formControlName]="'bloodPressure'" />
                                                                </mat-form-field>
                                                            </div>
                                                            <div class="col-lg-3 col-md-4 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline">
                                                                    <mat-label>Pulse</mat-label>
                                                                    <input matInput [formControlName]="'pulse'" />
                                                                </mat-form-field>
                                                            </div>
                                                        </div>
                        
                                                        <div class="row">
                                                            <div class="col-lg-3 col-md-4 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline">
                                                                    <mat-label>SpO2 %</mat-label>
                                                                    <input matInput [formControlName]="'SpO2'" />
                                                                </mat-form-field>
                                                            </div>
                                                            <div class="col-lg-3 col-md-4 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline">
                                                                    <mat-label>BMI</mat-label>
                                                                    <input matInput [formControlName]="'BMI'" />
                                                                </mat-form-field>
                                                            </div>
                                                            <!---    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline">
                                                                    <mat-label>Advice</mat-label>
                                                                    <input matInput [formControlName]="'advice'" />
                                                                </mat-form-field>
                                                            </div>-->
                        
                        
                                                        </div>
                                                    </fieldset>
                                                </ng-container>
                                                <!-- Security -->
                                                <!-- Plan & Billing -->
                                                <ng-container *ngSwitchCase="'Observations'">
                                                    <fieldset class="scheduler-border" [formGroup]="vitalsForm">
                                                        <div class="row">
                                                            <!---- <mat-form-field class="col-lg-12 col-md-12 col-sm-12 col-xs-12"
                                                                appearance="outline">
                                                                <mat-label>Select Visit Reason</mat-label>
                                                                <mat-select [formControlName]="'visitReason'">
                                                                    <mat-option *ngFor="let item of visitReason"
                                                                        [value]="item.visitReasonID">
                                                                        {{ item.reason }}
                                                                    </mat-option>
                                                                </mat-select>
                                                            </mat-form-field>-->
                        
                                                        </div>
                                                        <div class="row">
                                                            <mat-form-field
                                                                class="example-chip-list col-lg-12 col-md-12 col-sm-12 col-xs-12"
                                                                 appearance="outline">
                                                                <mat-label>
                                                                    Complaints (Type and select or press enter to
                                                                    add...)
                                                                </mat-label>
                                                                <mat-chip-list #chipList aria-label="Fruit selection">
                                                                    <mat-chip class="matchipheight" *ngFor="let fruit of fruits"
                                                                        [selectable]="selectable" [removable]="removable"
                                                                        (removed)="remove(fruit)">
                                                                        {{fruit}}
                                                                        <button class="cancelbtnheaight" matChipRemove *ngIf="removable">
                                                                            <mat-icon>cancel</mat-icon>
                                                                        </button>
                                                                    </mat-chip>
                                                                    <input class="alignthetext" #fruitInput [formControl]="fruitCtrl"
                                                                        [matAutocomplete]="auto" [matChipInputFor]="chipList"
                                                                        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                                                        (matChipInputTokenEnd)="add($event)">
                                                                </mat-chip-list>
                                                                <mat-autocomplete #auto="matAutocomplete"
                                                                    (optionSelected)="selected($event)">
                                                                    <mat-option *ngFor="let fruit of filteredFruits | async"
                                                                        [value]="fruit.complaintName">
                                                                        {{fruit.complaintName}}
                                                                    </mat-option>
                                                                </mat-autocomplete>
                                                            </mat-form-field>
                        
                                                        </div>
                                                    </fieldset>
                                                   
                                                </ng-container>
                        
                                                <ng-container *ngSwitchCase="'LabReports'">
                                                    <fieldset class="scheduler-border" [formGroup]="vitalsForm">
                                                        <div class="row" *ngIf="roleID != '2'">
                                                            <div class="col-lg-3 col-md-4 col-sm-12 col-xs-12">
                                                                <label for="colFormLabelSm0" class="col-form-label">Document Name</label>
                                                            </div>
                                                            <div class="col-lg-3 col-md-4 col-sm-12 col-xs-12">
                                                                <label for="colFormLabelSm1" class="col-form-label">Upload File</label>
                                                            </div>
                                                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                                <p style="text-align: right; margin-top: -8px;">
                                                                    <button type="button" class="px-5" mat-flat-button [color]="'primary'" style="margin-bottom: 7px; border-radius:5px;" (click)="addItem()">
                                                                        + Add
                                                                    </button>
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div class="row" *ngIf="roleID == '2'">
                                                            <div class="col-lg-3 col-md-5 col-sm-12 col-xs-12">
                                                                <label for="colFormLabelSm0" class="col-form-label">Document Name</label>
                                                            </div>
                                                            <div class="col-lg-3 col-md-5 col-sm-12 col-xs-12">
                                                                <label for="colFormLabelSm1" class="col-form-label">View File</label>
                                                            </div>
                                                        </div>
                                                
                                                        <!-- Check if there are any documents -->
                                                        <div *ngIf="vitalsForm.get('items').length === 0">
                                                            <p>No Documents</p>
                                                        </div>
                                                
                                                        <div formArrayName="items" *ngFor="let item of vitalsForm.get('items')['controls']; let i = index;">
                                                            <ng-container [formGroupName]="i" *ngIf="roleID != '2'">
                                                                <div class="row">
                                                                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                                        <mat-form-field appearance="outline">
                                                                            <input matInput [formControlName]="'docType'" />
                                                                        </mat-form-field>
                                                                    </div>
                                                                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                                        <div class="header-icon" (click)="file.click()" style="margin-left: -19px; width: 100%;">
                                                                            <button type="button" class="btn btn-primary" style="width: 100%; height: 57px !important; border-radius:5px;">
                                                                                <span style="font-size:20px;">📎</span> File Upload {{ i + 1 }}
                                                                            </button>
                                                                        </div>
                                                                        <span style="display:none">
                                                                            <input type="file" #file (change)="detectFiles($event,item)" class="form-control" formControlName="Image">
                                                                        </span>
                                                                    </div>
                                                                    <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                                                                        <div>
                                                                            <input autocomplete="off" class="form-control py-2 border-right-0 border" formControlName="fileName" readonly style="height: 57px !important;">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-1 col-md-1 col-sm-12 col-xs-12">
                                                                        <button type="button">
                                                                            <mat-icon svgIcon="heroicons_solid:trash" (click)="DeleteItem(i)" style="color:red;"></mat-icon>
                                                                        </button>
                                                                        <button type="button">
                                                                            <mat-icon svgIcon="heroicons_solid:eye" #file (click)="Viewfile($event,item)" style="color:#146aa6"></mat-icon>
                                                                        </button>
                                                                    </div>
                                                                    <div id="pdfContainer"></div>
                                                                </div>
                                                                <br />
                                                            </ng-container>
                                                            <ng-container [formGroupName]="i" *ngIf="roleID == '2'">
                                                                <div class="row">
                                                                    <div class="col-lg-3 col-md-5 col-sm-12 col-xs-12">
                                                                        <mat-form-field appearance="outline" class="disabled-input">
                                                                            <input matInput [formControlName]="'docType'" readonly="true" />
                                                                        </mat-form-field>
                                                                    </div>
                                                                    <div class="col-lg-3 col-md-5 col-sm-12 col-xs-12" style="padding-top: 12px;">
                                                                        <button mat-button>
                                                                            <div class="hovers" style="color: #146aa6;" #file (click)="Viewfile($event,item)">
                                                                                <mat-icon [matTooltipPosition]="'right'" [matTooltip]="tooltip || 'View File'" svgIcon="heroicons_solid:eye" #file style="color:#146aa6"></mat-icon>
                                                                            </div>
                                                                        </button>
                                                                    </div>
                                                                    <div id="pdfContainer"></div>
                                                                </div>
                                                                <br />
                                                            </ng-container>
                                                        </div>
                                                    </fieldset>
                                                </ng-container>
                                                
                        
                                                <ng-container *ngSwitchCase="'Medication'">
                                                    <fieldset class="scheduler-border" [formGroup]="vitalsForm">
                                                                <div class="viewbtn">
                                                                    <!-- <button type="button" mat-button matDialogClose
                                                                        (click)="closePresceptionDetailsDialog()">Cancel</button> -->
                                                                    <button type="button" mat-raised-button color="accent"
                                                                        (click)="ViewPrescption('component2')">Preview</button>
                                                                    </div>
                                                        <table id="medication" class="mediPanel">
                                                            <tr sticky>
                                                                <th>Medicine</th>
                                                                <th>Dosage</th>
                                                                <th>When</th>
                                                                <th>Frequency</th>
                                                                <th>Duration</th>
                                                                <!-- <th>Notes</th> -->
                                                                <th>Actions</th>
                                                            </tr>
                        
                                                            <tr formArrayName="medicationitems"
                                                                *ngFor="let item of vitalsForm.get('medicationitems')['controls']; let j = index;">
                                                                <ng-container [formGroupName]="j">
                        
                                                                    <td>
                                                                        <mat-form-field class="paddingtheforms" appearance="outline">
                                                                            <mat-label>medicine</mat-label>
                                                                          
                                                                            <mat-select #medicineSelect (selectionChange)="selectmed()" [formControlName]="'medicine'" [dataSource]="patientsappointment">
                                                                              
                                                                              <!-- Search input -->
                                                                              <mat-form-field *ngIf="formfields" class="fuse-mat-dense fuse-mat-no-subscript fuse-mat-rounded min-w-60 ml-3">
                                                                                <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:search'"></mat-icon>
                                                                                <input [formControlName]="'medicine1'" matInput #event placeholder="Search a Medicine" autocomplete="off" (keyup)="applyFilters($event)" />
                                                                              </mat-form-field>
                                                                          
                                                                              <!-- Dropdown options -->
                                                                              <div class="medicine-options">
                                                                                <mat-option *ngFor="let item of medicinePrescepList" class="medication" [value]="item.medicineName">
                                                                                  <h4 mat-line><span class="highlight">{{ item.medicineName }}</span></h4>
                                                                                  <p mat-line class="composition">Composition - {{ item.composition }}</p>
                                                                                </mat-option>
                                                                              </div>
                                                                              
                                                                            </mat-select>
                                                                          </mat-form-field>
                                                                          
                                                                        <!-- <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                                            <mat-form-field appearance="outline">
                                                                                <mat-label>Medicine</mat-label>
                                                                                
                                                                                <input matInput [formControlName]="'medication'" />
                                                                            </mat-form-field>
                                                                        </div> -->
                        
                                                                    </td>
                        
                        
                                                                    <td>
                                                                        <mat-form-field class="paddingtheforms" appearance="outline">
                                                                            <mat-label>dose</mat-label>
                                                                            <mat-select [formControlName]="'dose'">
                                                                                <mat-option *ngFor="let item of dose"
                                                                                    [value]="item.label">
                                                                                    {{ item.label }}
                                                                                </mat-option>
                                                                            </mat-select>
                                                                        </mat-form-field>
                                                                    </td>
                                                                    <td>
                                                                        <mat-form-field class="paddingtheforms" appearance="outline">
                                                                            <mat-label>when</mat-label>
                                                                            <mat-select [formControlName]="'when'">
                                                                                <mat-option *ngFor="let item of when"
                                                                                    [value]="item.label">
                                                                                    {{ item.label }}
                                                                                </mat-option>
                                                                            </mat-select>
                                                                        </mat-form-field>
                                                                    </td>
                                                                    <td>
                                                                        <mat-form-field class="paddingtheforms" appearance="outline">
                                                                            <mat-label>frequencyListMedication</mat-label>
                                                                            <mat-select [formControlName]="'frequencyListMedication'">
                                                                                <mat-option *ngFor="let item of frequencyListMedication"
                                                                                    [value]="item.label">
                                                                                    {{ item.label }}
                                                                                </mat-option>
                                                                            </mat-select>
                                                                        </mat-form-field>
                                                                    </td>
                                                                    <td>
                                                                        <mat-form-field class="paddingtheforms" appearance="outline">
                                                                            <mat-label>duration</mat-label>
                                                                            <mat-select [formControlName]="'duration'">
                                                                                <mat-option *ngFor="let item of duration"
                                                                                    [value]="item.label">
                                                                                    {{ item.label }}
                                                                                </mat-option>
                                                                            </mat-select>
                                                                        </mat-form-field>
                                                                    </td>
                        
                                                                    <!-- <td>
                        
                                                                        <mat-form-field appearance="outline">
                                                                            <mat-label>Notes</mat-label>
                                                                            <textarea matInput [formControlName]="'notes'" ></textarea>
                                                                        </mat-form-field>
                                                                    </td> -->
                        
                                                                    <!---  <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                                                        <mat-form-field appearance="outline">
                                                                            <mat-label>Advice</mat-label>
                                                                            <input matInput [formControlName]="'advice'" />
                                                                        </mat-form-field>
                                                                    </div>-->
                        
                                                                    <td>
                        
                                                                        <button type="button">
                                                                            <mat-icon style="color: #32CD32;cursor: pointer;"
                                                                                (click)="addMedicationItem()">add_box</mat-icon>
                                                                        </button>
                                                                        <button type="button">
                                                                            <mat-icon style="color:#ff4081;cursor: pointer;"
                                                                            (click)="confirmDelete(j)">delete</mat-icon>
                                                                        </button>
                        
                        
                                                                    </td>
                                                                    <br />
                                                                </ng-container>
                                                            </tr>
                        
                        
                                                        </table>
                        
                        
                        
                                                        <!-- <br>
                                                        <table>
                                                            <tr>
                        
                                                                <td>
                                                                    <button type="button" mat-button matDialogClose
                                                                        (click)="closePresceptionDetailsDialog()">Cancel</button>
                                                                    <button type="button" mat-raised-button color="accent"
                                                                        (click)="ViewPrescption('component2')">View</button>
                                                                </td>
                        
                        
                                                            </tr>
                                                        </table> -->
                                                    </fieldset>
                                                </ng-container>
                                                 <ng-container *ngSwitchCase="'Advice'">
                                                    <fieldset class="scheduler-border" [formGroup]="vitalsForm">
                                                        <div class="row">
                                                            <mat-form-field
                                                                class="example-chip-list col-lg-12 col-md-12 col-sm-12 col-xs-12"
                                                                appearance="outline">
                                                                <input matInput [formControlName]="'advice'" />
                        
                                                            </mat-form-field>
                        
                                                        </div>
                                                    </fieldset>
                                                </ng-container> 
                                                <ng-container *ngSwitchCase="'Nextvisit'">
                                                    <fieldset class="scheduler-border" [formGroup]="vitalsForm">
                                                        <div class="row">
                                                            <div class="col-lg-3 col-md-4 col-sm-12 col-xs-12">
                                                                <mat-form-field  appearance="outline">
                                                                    <mat-label>Next visit after</mat-label>
                                                                    <input  matInput [formControlName]="'nextVisit'" />
                                                                </mat-form-field>
                                                            </div>
                                                            <div class="col-lg-3 col-md-4 col-sm-12 col-xs-12">
                        
                                                                <mat-form-field appearance="outline">
                                                                    <mat-label>Frequency</mat-label>
                                                                    <mat-select [formControlName]="'frequency'">
                                                                        <mat-option *ngFor="let item of frequencyList"
                                                                            [value]="item.frequency">
                                                                            {{ item.frequency }}
                                                                        </mat-option>
                                                                    </mat-select>
                                                                </mat-form-field>
                                                            </div>
                                                            <!-- <div class="col-lg-1 col-md-1 col-sm-12 col-xs-12">
                                                                <label>OR</label>
                                                            </div>
                                                            <div class="col-lg-4 col-md-3 col-sm-12 col-xs-12">
                                                                <mat-form-field appearance="outline">
                                                                    <!-- <mat-label>Pick a date</mat-label> 
                                                                    <!-- <input matInput [formControlName]="'pickADate'" /> 
                                                                    <mat-form-field class="col-lg-12" appearance="outline">
                                                                        <mat-label>Pick a date</mat-label>
                                                                        <input matInput [matDatepicker]="picker"
                                                                            [formControlName]="'pickADate'" />
                                                                        <mat-datepicker-toggle matSuffix [for]="picker">
                                                                        </mat-datepicker-toggle>
                                                                        <mat-datepicker #picker></mat-datepicker>
                                                                    </mat-form-field>
                                                                </mat-form-field>
                                                            </div> -->
                                                        </div>
                        
                                                    </fieldset>
                                                    <div class="flex justify-end algn">
                                                        <!-- <button  type="button"    style="cursor: pointer;"
                                                        [ngClass]="(vitalsForm.invalid) ? 'btnsub' : 'btnsub1'" (click)="
                                                        addUpdateVitals(vitalsForm.value);"[disabled]="vitalsForm.invalid">
                                                          Submit
                                                      </button> -->
                                                        <button class="px-8" mat-flat-button [color]="'primary'" (click)="
                        addUpdateVitals(vitalsForm.value);" type="button">
                                                            <span *ngIf="!loading">Submit</span>
                                <mat-progress-spinner *ngIf="loading" [diameter]="20" [mode]="'indeterminate'" style="color: blue;"></mat-progress-spinner>
                                                        </button>
                                                    </div>
                                                </ng-container>
                        
                                                <!-- Team -->
                                            </ng-container>
                                        </div>
                        
                                    </div>
                        
                                </mat-drawer-content>
                        
                            </mat-drawer-container>

                        </div>
                    </mat-tab>

                    <mat-tab label="Previous Visit">

                        <!-- <button class="px-6 justify-end" mat-flat-button [color]="'primary'"                                         
                        type="button" >
                       Back
                   </button> -->


                        <div *ngIf="previousdata">
                            <div class="row" *ngFor="let item of patientHistory">

                                <div class="mat-accordion max-w-4xl mt-4 ng-star-inserted">

                                    <!-- <button class="fuse-mat-button-rounded col-span-2 flex flex-col justify-start"  mat-flat-button [color]="'primary'"
                                                              style="    margin-top: 10px;
                                                              margin-left: 92px;"
                                                                    (click)="onRowClicked1(item)">
                                                                    <span class="ml-2">Receipt</span>
                                                                </button> -->

                                </div>

                                <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12">
                                    <mat-accordion class="example-headers-align" multi>
                                        <mat-expansion-panel [expanded]="true">
                                            <mat-expansion-panel-header>
                                                <mat-panel-title>
                                                    <span class="doctr">
                                                        {{item.doctorName}} &nbsp; </span> <span
                                                        class="text-current pt-0.5 text-1xl">On {{item.serviceDate |
                                                        date : 'd MMMM'}}</span>

                                                </mat-panel-title>
                                                <!-- <mat-panel-description>
                                                See More
                                            </mat-panel-description> -->



                                            </mat-expansion-panel-header>


                                            <div class="row">
                                                <div class="col-lg-4 col-md-2 col-sm-8">
                                                    <label><span class="service">Service</span> <span class="service_d">
                                                            :
                                                            {{item.serviceName}}</span></label><br />
                                                    <!--- <label><span class="service">Complaint Box</span> <span class="service_d">
                                                        : {{item.reason}}</span></label><br />-->
                                                    <label><span class="service">Observation</span> <span
                                                            class="service_d">
                                                            :{{item.complaintName}} </span></label>
                                                    <br /> <br />
                                                    <label><span class="service">Vitals:</span> </label><br />
                                                    <label><span class="service_d">Weight </span> <span
                                                            class="service_d">:
                                                            {{item.weight}}</span></label><br />
                                                    <label><span class="service_d">Blood Group</span> <span
                                                            class="service_d"> :{{item.bloodGroup}}</span></label><br />
                                                    <label><span class="service_d">Temp </span> <span class="service_d">
                                                            :
                                                            {{item.temperature_F}}</span></label><br />
                                                    <label><span class="service_d">SpO2% </span> <span
                                                            class="service_d">:
                                                            {{item.spO2}}</span></label><br />
                                                    <label><span class="service_d">Blood Pressure </span> <span
                                                            class="service_d"> : {{item.bp}}</span></label><br />
                                                    <label><span class="service_d">BMI</span> <span class="service_d"> :
                                                            {{item.bmi}} </span></label><br />
                                                    <!---- <label><span class="service_d">Advice</span> <span class="service_d"> :
                                                            {{item.advice}} </span></label><br />   --->

                                                    <br /> <br />

                                                    <label>
                                                        <span>
                                                            <a href="http//google.co.in" target="_blank">
                                                                <!---  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/121px-PDF_file_icon.svg.png " style="width: 30px; height: 30px;position: relative;top: 20px;left: -17px;" >-->
                                                            </a>
                                                        </span>
                                                        <span class="service"
                                                            style="padding-left:50;left: 30px;margin-left: 20px;">Lab
                                                            Report :
                                                        </span><!--<span><input type="file" style="position: relative;bottom: 28px;left: 130px;"></span>-->
                                                        <span class="service_d" *ngFor="let value12 of item.documents">
                                                            <ul>
                                                                <li class="mouseover">{{ value12.docTypeNAme}}<mat-icon
                                                                        [matTooltipPosition]="'right'"
                                                                        [matTooltip]="tooltip || 'download'"
                                                                        svgIcon="heroicons_solid:download"
                                                                        (click)="DownloadDocument(value12.docTypeNAme)"
                                                                        #file
                                                                        style="color:blue;width:80px;position:relative;top:5px;">
                                                                    </mat-icon></li>
                                                                <!-- <li (click)="DownloadDocument(val)">{{val}}</li>  -->
                                                            </ul>
                                                            <!-- <button type="button" mat-raised-button color="primary" (click)="DownloadDocument(value12.docTypeNAme)"></button> -->
                                                            <!-- <mat-icon svgIcon="heroicons_solid:download" (click)="DownloadDocument(value12.docTypeNAme)" #file
                                                         style="color:blue;width:80px;">
                                                    </mat-icon> -->

                                                            <!-- <span class="service" style="padding-left:50;left: 30px;margin-left: 20px;">Lab Report : </span>
                                                    <span class="service_d" *ngFor="let val of labreportfiles"  >
                                                    <ul>
                                                        <li >{{val}}</li>
                                                       
                                                    </ul>  
                                                    <button type="button" mat-raised-button color="primary" (click)="DownloadDocument(val)">Download</button> -->


                                                            <!-- <a href="D:\Rheumatology\cmsapi\CMS.API\VitalsDocs\TestScenarios1.pdf" download>Test.pdf</a> -->

                                                        </span>
                                                    </label><br />

                                                </div>
                                                <div class="col-lg-8 col-md-8 col-sm-12">
                                                    <table id="customers">
                                                        <tr>
                                                            <th>Medicine</th>
                                                            <th>Dose</th>
                                                            <th>When</th>
                                                            <th>Frequency</th>
                                                            <th>Duration</th>
                                                            <th>Notes</th>
                                                        </tr>
                                                        <tr *ngFor="let medList of item.medicineList ">
                                                            <td><span class="service">{{medList.medicine}}</span>
                                                                <span class="serviceFont"
                                                                    *ngFor="let item of medicinePrescepList">
                                                                    <div *ngIf="item.medicineName == medList.medicine">
                                                                        Composition - {{item.composition}}
                                                                    </div>
                                                                </span>
                                                            </td>
                                                            <td>{{medList.dose}}</td>
                                                            <td>{{medList.when}}</td>
                                                            <!----  <td>{{medList.when}}</td>-->
                                                            <td>{{medList.frequencyListMedication}}</td>
                                                            <td>{{medList.duration}}</td>
                                                            <td>{{medList.notes}}</td>
                                                        </tr>

                                                    </table>
                                                </div>

                                                <!---   <div class="col-lg-8 col-md-8 col-sm-12">
                                                <table id="customers1">
                                                    <tr>
                                                        <th>Image</th>
                                                    </tr>
                                                    <tr *ngFor="let doclist of item.docsList ">
                                                        <td>{{doclist.docTypeNAme}}
                                                        </td>
                                                    </tr>

                                                </table>
                                            </div>-->

                                            </div>
                                        </mat-expansion-panel>
                                    </mat-accordion>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="!previousdata">


                            <div class="row">

                                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">


                                </div>

                                <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12">
                                    <mat-accordion class="example-headers-align" multi>
                                        <mat-expansion-panel [expanded]="true">
                                            <mat-expansion-panel-header>

                                            </mat-expansion-panel-header>


                                            <div class="row">

                                                <div class="col-lg-12 col-md-12 col-sm-12">

                                                    <div class="table1  example-container mat-elevation-z8">
                                                        <div class="center-container3">
                                                            <img class="w-16" style="opacity: 0.5;"
                                                                src="assets/images/logo/imgs1.svg" alt="Fuse logo">

                                                        </div>
                                                        <br>
                                                        <div class="center-container5">
                                                            <h2 style="color: #146aa6; margin-top: -170px;  ">
                                                                <b>No Previous Data Found </b>
                                                            </h2>
                                                        </div>
                                                    </div>



                                                </div>



                                            </div>
                                        </mat-expansion-panel>
                                    </mat-accordion>
                                </div>
                            </div>

                            <!-- <div class="center-container">
                                <img class="w-16" style="opacity: 0.5;" src="assets/images/logo/imgs1.svg" alt="Fuse logo">
                    
                            </div>
                    <br>
                    <div class="center-container1">
                    <h2 style="color: #146aa6;    margin-top: -59px;">
                    <b>No Previous Data  Found </b> 
                    </h2>
                    </div> -->

                        </div>


                    </mat-tab>
                    <mat-tab label="Payments">



                        <div class="row">

                            <div class="mat-accordion max-w-4xl mt-4 ng-star-inserted">



                            </div>

                            <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12">
                                <mat-accordion class="example-headers-align" multi>
                                    <mat-expansion-panel [expanded]="true">
                                        <mat-expansion-panel-header>





                                        </mat-expansion-panel-header>


                                        <div class="row">

                                            <div class="col-lg-12 col-md-12 col-sm-12">

                                                <div class="table1  example-container mat-elevation-z8">
                                                    <table mat-table [dataSource]="patientsappointment1" matSort>
                                                        <!-- Position Column -->
                                                        <ng-container matColumnDef="sno">
                                                            <th style="height: 24px;font-size: unset;text-align: center;"
                                                                class="text-lg text-white" mat-header-cell
                                                                *matHeaderCellDef>
                                                                S.No
                                                            </th>
                                                            <td style="height: 48px;font-size: unset;text-align: center;"
                                                                mat-cell *matCellDef="let element; let i = index">{{ i +
                                                                1 }}</td>

                                                        </ng-container>
                                                        <ng-container matColumnDef="serviceDate">
                                                            <th style="height: 24px;font-size: unset;text-align: center;"
                                                                class="text-lg text-white" mat-header-cell
                                                                *matHeaderCellDef>
                                                                Receipt Date
                                                            </th>
                                                            <td style="height: 48px;font-size: unset;text-align: center;"
                                                                mat-cell *matCellDef="let element">
                                                                {{element.serviceDate |date}}
                                                            </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="Amount">
                                                            <th style="height: 24px;font-size: unset;text-align: center;"
                                                                class="text-lg text-white" mat-header-cell
                                                                *matHeaderCellDef>
                                                                <!-- <span class="pt-1"><i class="material-icons">[attach_money]</i></span> -->
                                                                Amount &nbsp;<i class="material-icons">(</i> ₹ <i
                                                                    class="material-icons">)</i>

                                                            </th>
                                                            <td style="height: 48px;font-size: unset;text-align: center;"
                                                                mat-cell *matCellDef="let element">
                                                                <a (click)="onRowClicked1(element)">
                                                                    {{element.payment }}.00

                                                                </a>
                                                            </td>
                                                        </ng-container>
                                                        <ng-container matColumnDef="View">
                                                            <th style="height: 24px;font-size: unset;text-align: center;"
                                                                class="text-lg text-white" mat-header-cell
                                                                *matHeaderCellDef>
                                                                View Receipt
                                                            </th>
                                                            <td (click)="onRowClicked1(element)"
                                                                style="height: 48px;font-size: unset;text-align: center;cursor: pointer;"
                                                                mat-cell *matCellDef="let element">

                                                                <mat-icon [matTooltipPosition]="'right'"
                                                                    [matTooltip]="tooltip || 'View Receipt'"
                                                                    svgIcon="heroicons_solid:eye" style="color:#146aa6">
                                                                </mat-icon>

                                                            </td>
                                                        </ng-container>

                                                        <!-- <ng-container *ngIf="statusCompleted==1" matColumnDef="ViewPrescription">
                                                            <th style="height: 24px;font-size: unset;text-align: center;"
                                                                class="text-lg text-white" mat-header-cell
                                                                *matHeaderCellDef>
                                                                View Prescription
                                                            </th>
                                                            <td (click)="onRowPrintPresecptionClicked(element)"
                                                                style="height: 48px;font-size: unset;text-align: center;cursor: pointer;"
                                                                mat-cell *matCellDef="let element">

                                                                <mat-icon [matTooltipPosition]="'right'"
                                                                    [matTooltip]="tooltip || 'View Prescription'"
                                                                    svgIcon="heroicons_solid:eye" style="color:#146aa6">
                                                                </mat-icon>

                                                            </td>
                                                        </ng-container> -->


                                                        <!-- <ng-container matColumnDef="ViewPrescription">
                                                            <th mat-header-cell *matHeaderCellDef>
                                                              <ng-container *ngIf="statusCompleted == 1">
                                                                <span style="height: 24px; font-size: unset; text-align: center;" class="text-lg text-white">
                                                                  View Prescription
                                                                </span>
                                                              </ng-container>
                                                            </th>
                                                            <td mat-cell *matCellDef="let element">
                                                              <ng-container *ngIf="statusCompleted == 1">
                                                                <mat-icon
                                                                  (click)="onRowPrintPresecptionClicked(element)"
                                                                  [matTooltipPosition]="'right'"
                                                                  [matTooltip]="tooltip || 'View Prescription'"
                                                                  svgIcon="heroicons_solid:eye"
                                                                  style="color:#146aa6; height: 48px; font-size: unset; text-align: center; cursor: pointer;">
                                                                </mat-icon>
                                                              </ng-container>
                                                            </td>
                                                          </ng-container> -->
                                                          

                                                          <ng-container matColumnDef="ViewPrescription">
                                                            <th mat-header-cell *matHeaderCellDef>
                                                              <ng-container *ngIf="statusCompleted == 1">
                                                                <span style="display: block; text-align: center; height: 24px; font-size: unset;" class="text-lg text-white">
                                                                  View Prescription
                                                                </span>
                                                              </ng-container>
                                                            </th>
                                                            <td mat-cell *matCellDef="let element">
                                                              <ng-container *ngIf="statusCompleted == 1">
                                                                <div style="display: flex; justify-content: center; align-items: center; height: 48px;">
                                                                  <mat-icon
                                                                    (click)="onRowPrintPresecptionClicked(element)"
                                                                    [matTooltipPosition]="'right'"
                                                                    [matTooltip]="tooltip || 'View Prescription'"
                                                                    svgIcon="heroicons_solid:eye"
                                                                    style="color: #146aa6; cursor: pointer;">
                                                                  </mat-icon>
                                                                </div>
                                                              </ng-container>
                                                            </td>
                                                          </ng-container>
                                                          


                                                        <tr mat-header-row class="height"
                                                            *matHeaderRowDef="displayedColumnsHistory1; sticky: true">
                                                        </tr>
                                                        <!--<tr mat-row
                                        *matRowDef="let row; columns: displayedColumns"></tr>-->
                                                        <tr mat-row class="height"
                                                            *matRowDef="let row; columns: displayedColumnsHistory1;">
                                                        </tr>

                                                    </table>
                                                    <mat-paginator #HistoryPaginator1
                                                        [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="100"
                                                        showFirstLastButtons>
                                                    </mat-paginator>
                                                </div>



                                            </div>



                                        </div>
                                    </mat-expansion-panel>
                                </mat-accordion>
                            </div>
                        </div>

                    </mat-tab>
                    <mat-tab label="Lab ">

                        <div class="row">

                            <div class="mat-accordion max-w-4xl mt-4 ng-star-inserted">


                            </div>

                            <div class="col-lg-10 col-md-10 col-sm-12 col-xs-12">
                                <mat-accordion class="example-headers-align" multi>
                                    <mat-expansion-panel [expanded]="true">
                                        <mat-expansion-panel-header>





                                        </mat-expansion-panel-header>


                                        <div class="row">

                                            <div class="col-lg-12 col-md-12 col-sm-12">

                                                <div class="table1  example-container mat-elevation-z8">
                                                    <!-- <table mat-table [dataSource]="patientsappointment1" matSort>
                                                
                                                                    <ng-container matColumnDef="serviceDate">
                                                                        <th style="height: 24px;font-size: unset;text-align: center;" mat-header-cell *matHeaderCellDef>
                                                                            Receipt Date
                                                                        </th>
                                                                        <td style="height: 48px;font-size: unset;text-align: center;" mat-cell *matCellDef="let element">
                                                                            {{element.serviceDate |date}}
                                                                        </td>
                                                                    </ng-container>
                                                                    <ng-container matColumnDef="Amount">
                                                                        <th style="height: 24px;font-size: unset;text-align: center;" mat-header-cell *matHeaderCellDef>
                                                                         Amount
                                                                        </th>
                                                                        <td style="height: 48px;font-size: unset;text-align: center;" mat-cell *matCellDef="let element">
                                                                            <a (click)="onRowClicked1(element)" >
                                                                                {{element.payment }}

                                                                            </a>
                                                                        </td>
                                                                    </ng-container>
                                                                     <ng-container matColumnDef="View">
                                                                        <th style="height: 24px;font-size: unset;text-align: center;" mat-header-cell *matHeaderCellDef>
                                                                            View Receipt
                                                                        </th>
                                                                        <td (click)="onRowClicked1(element)" style="height: 48px;font-size: unset;text-align: center;cursor: pointer;" mat-cell *matCellDef="let element">
                                                                         
                                                                            <mat-icon [matTooltipPosition]="'right'"   [matTooltip]="tooltip || 'View Receipt'" svgIcon="heroicons_solid:eye" 
                                                                            style="color:#146aa6">
                                                                       </mat-icon>
                                                                           
                                                                        </td>
                                                                    </ng-container>
                                                                  
                                                                    <tr mat-header-row *matHeaderRowDef="displayedColumnsHistory1; sticky: true"></tr>
                                       
                                        <tr mat-row *matRowDef="let row; columns: displayedColumnsHistory1;"></tr>
                                                                   
                                                                </table>
                                                                <mat-paginator #HistoryPaginator1 [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="10"
                                                                    showFirstLastButtons>
                                                                </mat-paginator> -->
                                                </div>



                                            </div>



                                        </div>
                                    </mat-expansion-panel>
                                </mat-accordion>
                            </div>
                        </div>


                    </mat-tab>

                </mat-tab-group>
            </div>
        </div>
    </div>



</div>



<ng-template #editCompanyModal>
    <mat-dialog-content>
      <fieldset  id="component1"  class="receipt-fieldset">
  
        <div class="receipt-header">
          <div class="logo-container">
            <img src="assets/images/logo/LOGO.png" class="clinic-logo" />
          </div>
          <div class="doctor-info">
            <!-- <p class="doctor-name">Dr. {{ doctor }}, <span style="font-weight:400; color: black;">{{ doctorQualification }}<br><span style="font-size: 90%;">{{ doctorDesignation }}</span></span></p> -->
            <p class="doctor-name">Dr. {{ doctor }}, <span style="font-weight:400; color: black;">{{ doctorQualification }}<br><span style="font-size: 90%;min-height: 1.5em;">{{ doctorDesignation || '&nbsp;' }}</span></span></p>
            <p class="address">
              <!-- 1st Floor, Kautilya Building, Metro Pillar No A 1143, <br>
              Near Erramanzil Bus Stop, Punjagutta, Hyderabad 500082 -->
              1-7-71/11, Street No. 8, Back Side Swathi Tiffins,<br>Maheswari Nagar, Habsiguda, Hyderabad, Telangana 500007
            </p>
        </div>
          <!-- <mat-icon class="close-icon" aria-label="Close dialog" (click)="closeCompanyDetailsDialog()" matTooltip="Close">
            <span>close</span>
          </mat-icon> -->
        </div>
  

           
                <p class="pay_recp"><strong>PAYMENT RECEIPT - {{ receiptNumber }}</strong><br>               
                     <!-- <span class="date_time"><strong>{{ currentDate }}, {{ currentTime }}</strong></span> -->
                    <span class="date_time"><strong>{{ appointmentDateWithTime }}</strong></span>
                </p>
         
  
        <!-- <div class="receipt-metadata">
          <div class="hide-on-print"><strong>Token No: {{receiptToken}}</strong></div>
          <div><strong>Patient ID:</strong> {{patientID}}</div>
        </div>
  
        <div class="patient-details">
          <span style="font-size: medium;">Patient Detail</span><br>
          <span class="patient-name">{{ patientName }} ({{ gender }}, {{ age }})</span><br>
          <span>{{ patientPhoneNumber }}</span>
        </div> -->

        <div class="patient-info">
            <div class="patient-details">
              <span style="font-size: medium;">Patient Detail</span><br>
              <span class="patient-name">{{ patientName }} ({{ gender }}, {{ age }}Y)</span><br>
              <span style="font-size: medium;">Mob: {{ patientPhoneNumber }}</span>
            </div>
          
            <div class="receipt-metadata">


                <div class="receiptToken-metadata">
                    Token Number<br> <strong>{{receiptToken}}</strong>
                  </div>


              <!-- <div class="token-no"><span style="margin-right: 150px">Token Number<br> <strong> {{receiptToken}}</strong></span></div> -->
              <!-- <div>Patient ID<br> <strong> {{patientID}}</strong></div> -->
              <div style="text-align: right; color: black;">
                Patient ID<br> <strong>{{patientID}}</strong>
              </div>
            </div>
          </div>
          
  
        <table class="receipt-table" width="100%">
          <thead style="border-top:1px dashed #c1c1c1;">
            <tr>
              <th>#</th> 
              <th>Service Particulars</th>
              <th style="padding-left: 8%;">Consultation Fee</th>
            </tr>
          </thead>
          <tbody style="border-bottom:1px dashed #c1c1c1;">
            <tr>
              <td style="font-weight: 400;">1</td>
              <td>{{ serviceName }}</td>
              <td style="padding-left: 8%;">Rs. {{ payment }}</td>
            </tr>
          </tbody>
        </table>

        <div class="payment-info">
          <p>Payment Mode: <br><strong>{{ modeofPayment }} </strong><br><span style="font-weight:500">[{{ amountInWords }} Rupees Only]</span></p>
        </div>
  
        <div class="stamp">
        <div class="footer-contact">
          <!-- <p><strong>Contact:</strong> <span style="font-weight:400"> 040-23307432, +91 9247435254 <br>9am - 5pm, Sunday Closed</span></p> -->
          <p><strong>Contact:</strong> <span style="font-weight:400"> +91 9581170254 <br>9am - 5pm, Sunday Closed</span></p>
        </div>

        <div class="paid-stamp">
            <img src="assets/images/logo/payment_receipt_stamp.jpeg"/>
        </div>

        </div>

        <!-- <div class="footer-note">
            <p>This is a computer-generated receipt. No signature is required. Generated on {{ currentDate }}, {{ currentTime }}.</p>
        </div> -->
    
        <!-- <div class="footer-note">
          <p>This is a computer-generated receipt. No signature is required.</p>
        </div> -->
  
      </fieldset>
    </mat-dialog-content>
  
    <mat-dialog-actions style="float: right;" align="end">
      <button mat-button matDialogClose style="margin-right: 5px;" (click)="closeCompanyDetailsDialog()">Cancel</button>
      <button type="button" mat-raised-button color="accent" (click)="print1('component1')">Print</button>
    </mat-dialog-actions>
  </ng-template>
  


<ng-template #presecptionModal>

    <mat-dialog-content>
        <fieldset>

            <mat-icon style="float: right;" class="mouseover" matTooltip="Close" aria-label="Close dialog" (click)="closePrecesptionDialog()">close</mat-icon>
            <table border="0" cellpadding="0" cellspacing="0" width="100%" id="component2">
                <tr>
                    <td align="center" bgcolor="#D2C7BA">
                        <table border="0" cellpadding="0" cellspacing="0" >
                            <tr>
                                <td class="payment_Receipt">
                                    <img src="assets/images/logo/LOGO.png" />
                                </td>
                                <td class="heading_1">Prescription</td>
                            </tr>
                        </table>

                    </td>
                </tr>

                <tr>
                    <td align="center" bgcolor="">
                        <table style="margin-left: 24px;" class="Token_No mb-2" border="0" cellpadding="0" cellspacing="0">
                            <tr>


                            
                                <td class="">
                                    <!-- <span>Patient ID:</span> -->
                                    <div class="tocken_no mt-2">{{detailData.patientARCID}}</div>
                                </td>
                                <td class="">
                                    <!-- <span>Patient Name:</span>  -->
                                    <div class="tocken_no">{{detailData.patientName}}( {{detailData.age}}y, {{detailData.gender}} ), {{detailData.mobile}}</div>
                                </td>

                            </tr>
                            <tr style="background-color:#fff">
                                <td class="">
                                    <!-- <span>Date:</span> -->
                                    <div class="tocken_no">Date: {{detailData.appointmentDate}}</div>
                                </td>
                                 <td class="t">
                                    <!-- <span>Service Name:</span> -->
                                    <div class="tocken_no">{{detailData.serviceName}}</div>
                                </td>
                            </tr>
                            <!---  <tr style="background-color:#fff">

                                <td class="td_style">
                                    <span>AdviceTest</span>
                                    <div class="tocken_no">{{detailData.advice}}</div>
                                </td>
                                <td class="td_style">
                                    <span>Next visit</span>
                                    <div class="tocken_no">{{detailData.patient}}</div>
                                </td>
                            </tr>-->
                        </table>

                      
                        
                        <table style="margin-left: 24px;" class="Token_No mb-2" >
                            <tr>
                              <td>
                                <span>Weight: <b>{{vitalsForm.get('weight').value}}</b></span>
                              </td>
                              <td>
                                <span>BMI: <b>{{vitalsForm.get('BMI').value}}</b></span>
                              </td>
                              <td>
                                <span>SpO2: <b>{{vitalsForm.get('SpO2').value}}</b></span>
                              </td>
                              <td>
                                <span>Blood Group: <b>{{vitalsForm.get('bloodGroup').value}}</b></span>
                              </td>
                              <td>
                                <span>BP: <b>{{vitalsForm.get('bloodPressure').value}}</b></span>
                              </td>
                              <td>
                                <span>Pulse: <b>{{vitalsForm.get('pulse').value}}</b></span>
                              </td>
                              <td>
                                <span>Temperature: <b>{{vitalsForm.get('temp').value}}</b></span>
                              </td>
                              <!-- <td>
                                <span>Serum Creatinine: <b>{{vitalsForm.get('serumCreatinine').value}}</b></span>
                              </td> -->
                            </tr>
                          </table>
                          


                     <div style="margin-left: 24px;" class="Token_No pb-2 "></div>
                        <table class="Payment_method_bgmcolrrrr" border="0" cellpadding="0" cellspacing="0">
                            <tr>
                                <td class="Payment_row mt-2">
                                    <table id="customers">
                                        <tr>
                                            <th ><span style="float: left;">Medicine</span></th>
                                            <th >Dosage</th>
                                            <th >When</th>
                                            <th >Frequency</th>
                                            <th >Duration</th>

                                        </tr>
                                        <ng-container *ngFor="let medList of vitalsForm.value.medicationitems">


                                            <tr class="td_table2" >

                                                <!-- <td style="width: 20%;"><span
                                                    class="service">{{medList.medicine}}</span><br />
                                                <span class="serviceFont" *ngFor="let item of medicinePrescepList">
                                                    <div *ngIf="item.medicineName == medList.medicine">
                                                        Composition - {{item.composition}}
                                                    </div>
                                                </span>
                                                <span class="service"> Composition - {{medList.medicine}}    </span>                                         
                                            </td> -->

                                                <td>
                                                    <span class="service"><b>{{medList.medicine}}</b></span><br />
                                                    <span class="serviceFont" *ngFor="let item of medicinePrescepList">
                                                        <div class="composition" style="width: 40ch;" *ngIf="item.medicineName == medList.medicine">
                                                            <!-- Composition - {{item.composition}} -->
                                                            Composition - {{truncateComposition(item.composition)}}
                                                        </div>
                                                    </span>
                                                </td>
                                                
                                                
                                                <td >{{medList.dose}}</td>
                                                <td >{{medList.when}}</td>
                                                <td >{{medList.frequencyListMedication}}</td>
                                                <td >{{medList.duration}}</td>


                                                <!---   <td>{{medList.notes}}</td>-->
                                            </tr>
                                            <!-- <tr>
                                        <td  >
                                        <b >Notes:</b>
                                    </td>
                                        <td colspan="4" style="text-align: start;" >
                                        {{medList.notes}}
                                    </td>
                                       </tr> -->
                                        </ng-container>
                                       
                                        <ng-container>
                                            <tr class="td_table2">
                                     <td><span class="advice"><b>Note - {{vitalsForm.get('advice').value}}</b></span></td>  
                                    </tr>
                                        </ng-container>
                                    </table>
                              

                                </td>
                            </tr>
                        </table>
                       
                    
                        <table class="Payment_method_bgmcolr">
                            <!-- <tr>
                                <td class="Payment_row">
                                    <table id="">
                                            <p><b>Notes</b></p>
                                     
                                        <tr *ngFor="let medList of vitalsForm.value.medicationitems let i = index;"  >
                                          
                                            <td align="left">
                                                {{i+1}}.&nbsp;&nbsp;{{medList.notes}} </td>
                                       
                                   
                                    </tr>
                                    </table>

                                </td>
                            </tr>  -->
                            <tr>
                                <td class="Payment_row">
                                    <!-- <table id="Advise">
                                        <p><b>Advice</b></p>
                                        <tr class="td_table2" class="table table-borderless">
                                            <td>{{vitalsForm.get('advice').value}}</td>
                                        </tr>
                                    </table> -->

                                </td>
                            </tr>
                            <tr>
                                <td >
                                    <table style="position: relative;left: 30px;" id="Nextvisit">
                                        <!-- <p><b>Next visit</b></p> -->
                                        <tr class="td_table2" class="table table-borderless">
                                            <td><p><b>Next visit</b></p></td></tr>
                                        <tr class="td_table2" class="table table-borderless">
                                            <td>{{vitalsForm.get('nextVisit').value}} {{vitalsForm.get('frequency').value}}
                                            </td>
                                        </tr>
                                    </table>

                                </td>
                            </tr>

                        </table>
                    </td>
                </tr>

                <tr>
                    <td align="center" bgcolor="" valign="top" width="100%">

                        <table style="max-width: 600px;" align="center" bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0" width="100%"
                            >
                            <tr>
                                <td align="center" valign="top" style="font-size: 0; border-bottom: 3px solid #d4dadf">

                                    <div  style="display: inline-block; width: 100%;vertical-align: top;">
                                        <table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">
                                            <tr>
                                                <td class="Adress_row" valign="top">
                                                    <p style="margin-bottom: 5px;"><strong>Advance Rheumatology
                                                            Center</strong></p>
                                                    <p style="margin-top: 0;">6-3-652, 1st Floor, Kautilya Building,
                                                        near Erramanzil bus stop, Somajiguda, <br> Hyderabad, Telangana
                                                        500082, Contact No : 9247435254 </p>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>

                                </td>
                            </tr>
                        </table>

                    </td>
                </tr>

                <tr>
                    <td align="center" bgcolor="" style="padding: 10px;">
                    </td>
                </tr>
            </table>
        </fieldset>
    </mat-dialog-content>
    <mat-dialog-actions style="float:right;">
        <button style="    margin-bottom: 19px;" type="button" mat-button matDialogClose
            (click)="closePrecesptionDialog()">Cancel</button>
        <button style="    margin-bottom: 19px;" type="button" mat-raised-button color="accent"
            (click)="printPresecption('component2')">Print</button>
    </mat-dialog-actions>
    <!-- </form> -->
</ng-template>
